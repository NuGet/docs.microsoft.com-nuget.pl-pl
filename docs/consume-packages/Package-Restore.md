---
title: Przywracanie pakietu NuGet
description: Omówienie sposobu przywracania pakietów przez pakiet NuGet, od których zależy projekt, w tym sposobu wyłączania wersji przywracania i ograniczania.
author: karann-msft
ms.author: karann
ms.date: 06/24/2019
ms.topic: conceptual
ms.openlocfilehash: 0df2b0ebcf438fba99291558f1cf929dcb32618b
ms.sourcegitcommit: efc18d484fdf0c7a8979b564dcb191c030601bb4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/18/2019
ms.locfileid: "68316984"
---
# <a name="package-restore-options"></a><span data-ttu-id="dda37-103">Opcje przywracania pakietu</span><span class="sxs-lookup"><span data-stu-id="dda37-103">Package Restore options</span></span>

<span data-ttu-id="dda37-104">Aby podwyższyć poziom czystego środowiska programistycznego i zmniejszyć rozmiar repozytorium, **przywracanie pakietu** NuGet instaluje wszystkie zależności projektu wymienione w pliku projektu lub `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="dda37-104">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all of a project's dependencies listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="dda37-105">Polecenia programu .NET Core 2.0 `dotnet build` + `dotnet run` i wykonują automatyczne przywracanie pakietów.</span><span class="sxs-lookup"><span data-stu-id="dda37-105">The .NET Core 2.0+ `dotnet build` and `dotnet run` commands do an automatic package restore.</span></span> <span data-ttu-id="dda37-106">Program Visual Studio może automatycznie przywracać pakiety podczas kompilacji projektu, a pakiety można przywracać w dowolnym momencie za pomocą programu Visual `nuget restore`Studio `dotnet restore`,, i Xbuild na mono.</span><span class="sxs-lookup"><span data-stu-id="dda37-106">Visual Studio can restore packages automatically when it builds a project, and you can restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="dda37-107">Przywracanie pakietu gwarantuje, że wszystkie zależności projektu są dostępne bez konieczności przechowywania ich w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="dda37-107">Package Restore makes sure that all a project's dependencies are available, without having to store them in source control.</span></span> <span data-ttu-id="dda37-108">Aby skonfigurować repozytorium kontroli źródła w celu wykluczenia plików binarnych pakietu, zobacz [pakiety i kontrola źródła](../consume-packages/packages-and-source-control.md).</span><span class="sxs-lookup"><span data-stu-id="dda37-108">To configure your source control repository to exclude the package binaries, see [Packages and source control](../consume-packages/packages-and-source-control.md).</span></span> 

## <a name="package-restore-overview"></a><span data-ttu-id="dda37-109">Przegląd przywracania pakietu</span><span class="sxs-lookup"><span data-stu-id="dda37-109">Package Restore overview</span></span>

<span data-ttu-id="dda37-110">Funkcja przywracania pakietu najpierw instaluje bezpośrednie zależności projektu w razie konieczności, a następnie instaluje wszystkie zależności tych pakietów w całym grafie zależności.</span><span class="sxs-lookup"><span data-stu-id="dda37-110">Package Restore first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="dda37-111">Jeśli pakiet nie jest już zainstalowany, program NuGet najpierw podejmie próbę pobrania go z [pamięci](../consume-packages/managing-the-global-packages-and-cache-folders.md)podręcznej.</span><span class="sxs-lookup"><span data-stu-id="dda37-111">If a package isn't already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="dda37-112">Jeśli pakiet nie znajduje się w pamięci podręcznej, program NuGet próbuje pobrać pakiet ze wszystkich włączonych źródeł na liście**opcji** >  **Narzędzia** >  > **Menedżer pakietów NuGet** **źródła pakietów** w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="dda37-112">If the package isn't in the cache, NuGet tries to download the package from all enabled sources in the list at **Tools** > **Options** > **NuGet Package Manager** > **Package Sources** in Visual Studio.</span></span> <span data-ttu-id="dda37-113">Podczas przywracania program NuGet ignoruje kolejność źródeł pakietów i używa pakietu z tego samego źródła, aby odpowiedzieć na żądania.</span><span class="sxs-lookup"><span data-stu-id="dda37-113">During restore, NuGet ignores the order of package sources, and uses the package from whichever source is first to respond to requests.</span></span> <span data-ttu-id="dda37-114">Aby uzyskać więcej informacji o zachowaniu NuGet, zobacz [typowe konfiguracje NuGet](Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="dda37-114">For more information about how NuGet behaves, see [Common NuGet configurations](Configuring-NuGet-Behavior.md).</span></span> 

> [!Note]
> <span data-ttu-id="dda37-115">Pakiet NuGet nie wskazuje błędu przywrócenia pakietu, dopóki nie zostaną sprawdzone wszystkie źródła.</span><span class="sxs-lookup"><span data-stu-id="dda37-115">NuGet doesn't indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="dda37-116">W tym czasie NuGet zgłosi błąd tylko dla ostatniego źródła na liście.</span><span class="sxs-lookup"><span data-stu-id="dda37-116">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="dda37-117">Ten błąd oznacza, że pakiet nie był obecny w *żadnym* z innych źródeł, mimo że błędy nie są wyświetlane dla każdego z tych źródeł osobno.</span><span class="sxs-lookup"><span data-stu-id="dda37-117">The error implies that the package wasn't present on *any* of the other sources, even though errors aren't shown for each of those sources individually.</span></span>

## <a name="restore-packages"></a><span data-ttu-id="dda37-118">Przywróć pakiety</span><span class="sxs-lookup"><span data-stu-id="dda37-118">Restore packages</span></span>

<span data-ttu-id="dda37-119">Przywracanie pakietu można wyzwolić w dowolny z następujących sposobów:</span><span class="sxs-lookup"><span data-stu-id="dda37-119">You can trigger Package Restore in any of the following ways:</span></span>

- <span data-ttu-id="dda37-120">**Visual Studio**: W programie Visual Studio w systemie Windows należy użyć jednej z następujących metod.</span><span class="sxs-lookup"><span data-stu-id="dda37-120">**Visual Studio**: In Visual Studio on Windows, use one of the following methods.</span></span>

    - <span data-ttu-id="dda37-121">Przywróć pakiety automatycznie.</span><span class="sxs-lookup"><span data-stu-id="dda37-121">Restore packages automatically.</span></span> <span data-ttu-id="dda37-122">Przywracanie pakietu odbywa się automatycznie podczas tworzenia projektu na podstawie szablonu lub kompilowania projektu, z zastosowaniem opcji w [Włączanie i wyłączanie przywracania pakietów](#enable-and-disable-package-restore-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="dda37-122">Package Restore happens automatically when you create a project from a template or build a project, subject to the options in [Enable and disable package restore](#enable-and-disable-package-restore-visual-studio).</span></span> <span data-ttu-id="dda37-123">W programie NuGet 4.0 + przywracanie odbywa się również automatycznie po wprowadzeniu zmian w projekcie w stylu zestawu SDK (zazwyczaj jest to projekt .NET Core lub .NET Standard).</span><span class="sxs-lookup"><span data-stu-id="dda37-123">In NuGet 4.0+, restore also happens automatically when you make changes to a SDK-style project (typically a .NET Core or .NET Standard project).</span></span>

    - <span data-ttu-id="dda37-124">Przywróć pakiety ręcznie.</span><span class="sxs-lookup"><span data-stu-id="dda37-124">Restore packages manually.</span></span> <span data-ttu-id="dda37-125">Aby przywrócić ręcznie, kliknij prawym przyciskiem myszy rozwiązanie w **Eksplorator rozwiązań** i wybierz polecenie **Przywróć pakiety NuGet**.</span><span class="sxs-lookup"><span data-stu-id="dda37-125">To restore manually, right-click the solution in **Solution Explorer** and select **Restore NuGet Packages**.</span></span> <span data-ttu-id="dda37-126">Jeśli co najmniej jeden z pojedynczych pakietów nadal nie jest prawidłowo zainstalowany, **Eksplorator rozwiązań** pokazuje ikonę błędu.</span><span class="sxs-lookup"><span data-stu-id="dda37-126">If one or more individual packages still aren't installed properly, **Solution Explorer** shows an error icon.</span></span> <span data-ttu-id="dda37-127">Kliknij prawym przyciskiem myszy i wybierz pozycję **Zarządzaj pakietami NuGet**, a następnie użyj **Menedżera pakietów** do odinstalowania i ponownego zainstalowania odpowiednich pakietów.</span><span class="sxs-lookup"><span data-stu-id="dda37-127">Right-click and select **Manage NuGet Packages**, and use **Package Manager** to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="dda37-128">Aby uzyskać więcej informacji, zobacz [Instalowanie i aktualizowanie pakietów](../consume-packages/reinstalling-and-updating-packages.md)</span><span class="sxs-lookup"><span data-stu-id="dda37-128">For more information, see [Reinstall and update packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

    <span data-ttu-id="dda37-129">Jeśli zostanie wyświetlony komunikat o błędzie "ten projekt odwołuje się do pakietów NuGet, których brakuje na tym komputerze" lub "co najmniej jeden pakiet NuGet musi zostać przywrócony, ale nie można go przydzielić," [Włącz automatyczne przywracanie](#enable-and-disable-package-restore-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="dda37-129">If you see the error "This project references NuGet package(s) that are missing on this computer," or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," [enable automatic restore](#enable-and-disable-package-restore-visual-studio).</span></span> <span data-ttu-id="dda37-130">Zobacz również sekcję [Migrowanie do automatycznego przywracania pakietów](#migrate-to-automatic-package-restore-visual-studio) i [Rozwiązywanie problemów z przywracaniem pakietów](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="dda37-130">Also, see [Migrate to automatic package restore](#migrate-to-automatic-package-restore-visual-studio) and [Package Restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

- <span data-ttu-id="dda37-131">**interfejs wiersza polecenia dotnet**: W wierszu polecenia przejdź do folderu, który zawiera Twój projekt, a następnie użyj [dotnet Restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) polecenia, aby przywrócić pakiety wymienione w pliku projektu z [PackageReference](../consume-packages/package-references-in-project-files.md).</span><span class="sxs-lookup"><span data-stu-id="dda37-131">**dotnet CLI**: In the command line, switch to the folder that contains your project, and then use the [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) command to restore packages listed in the project file with [PackageReference](../consume-packages/package-references-in-project-files.md).</span></span> <span data-ttu-id="dda37-132">W przypadku platformy .NET Core 2,0 i nowszych przywracanie odbywa się automatycznie `dotnet build` przy `dotnet run` użyciu poleceń i.</span><span class="sxs-lookup"><span data-stu-id="dda37-132">With .NET Core 2.0 and later, restore happens automatically with the `dotnet build` and `dotnet run` commands.</span></span>  

- <span data-ttu-id="dda37-133">**interfejs wiersza polecenia NuGet. exe**: W wierszu polecenia przejdź do folderu, który zawiera projekt, a następnie użyj polecenia [przywracania NuGet](../reference/cli-reference/cli-ref-restore.md) , aby przywrócić pakiety wymienione w pliku projektu lub rozwiązania lub w `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="dda37-133">**nuget.exe CLI**: In the command line, switch to the folder that contains your project, and then use the [nuget restore](../reference/cli-reference/cli-ref-restore.md) command to restore packages listed in a project or solution file, or in `packages.config`.</span></span> 

- <span data-ttu-id="dda37-134">**MSBuild**: Użyj polecenia [MSBuild-t:Restore](../reference/msbuild-targets.md#restore-target) , aby przywrócić pakiety wymienione w pliku projektu z PackageReference.</span><span class="sxs-lookup"><span data-stu-id="dda37-134">**MSBuild**: Use the [msbuild -t:restore](../reference/msbuild-targets.md#restore-target) command to restore packages listed in the project file with PackageReference.</span></span> <span data-ttu-id="dda37-135">To polecenie jest dostępne tylko w pakiecie NuGet 4. x + i MSBuild 15.1 +, które są dołączone do programu Visual Studio 2017 i nowszych wersji.</span><span class="sxs-lookup"><span data-stu-id="dda37-135">This command is available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017 and higher versions.</span></span> <span data-ttu-id="dda37-136">Oba `nuget restore` te `dotnet restore` polecenia i służą do odpowiednich projektów.</span><span class="sxs-lookup"><span data-stu-id="dda37-136">Both `nuget restore` and `dotnet restore` use this command for applicable projects.</span></span>

- <span data-ttu-id="dda37-137">**Azure Pipelines**: Podczas tworzenia definicji kompilacji w Azure Pipelines należy uwzględnić w definicji zadanie [przywracania](/azure/devops/pipelines/tasks/package/nuget#restore-nuget-packages) NuGet lub [przywracanie](/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops) oprogramowania .NET Core przed zadaniami kompilacji.</span><span class="sxs-lookup"><span data-stu-id="dda37-137">**Azure Pipelines**: When you create a build definition in Azure Pipelines, include the NuGet [restore](/azure/devops/pipelines/tasks/package/nuget#restore-nuget-packages) or .NET Core [restore](/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops) task in the definition before any build tasks.</span></span> <span data-ttu-id="dda37-138">Niektóre szablony kompilacji domyślnie zawierają zadanie przywracania.</span><span class="sxs-lookup"><span data-stu-id="dda37-138">Some build templates include the restore task by default.</span></span>

- <span data-ttu-id="dda37-139">**Azure DevOps Server**: Azure DevOps Server i TFS 2013 i nowsze automatycznie przywracają pakiety podczas kompilacji, jeśli używasz szablonu kompilacji TFS 2013 lub nowszego.</span><span class="sxs-lookup"><span data-stu-id="dda37-139">**Azure DevOps Server**: Azure DevOps Server and TFS 2013 and later automatically restore packages during build, if you're using a TFS 2013 or later Team Build template.</span></span> <span data-ttu-id="dda37-140">W przypadku wcześniejszych wersji programu TFS można uwzględnić krok kompilacji, aby uruchomić opcję przywracania wiersza polecenia lub opcjonalnie przeprowadzić migrację szablonu kompilacji do nowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="dda37-140">For earlier TFS versions, you can include a build step to run a command-line restore option, or optionally migrate the build template to a later version.</span></span> <span data-ttu-id="dda37-141">Aby uzyskać więcej informacji, zobacz [Konfigurowanie przywracania pakietu przy użyciu Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="dda37-141">For more information, see [Set up package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="enable-and-disable-package-restore-visual-studio"></a><span data-ttu-id="dda37-142">Włączanie i wyłączanie przywracania pakietów (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="dda37-142">Enable and disable package restore (Visual Studio)</span></span>

<span data-ttu-id="dda37-143">W programie Visual Studio można sterować przywracaniem pakietów głównie za poorednictwem**opcji** >  **Narzędzia** > **Menedżer pakietów NuGet**:</span><span class="sxs-lookup"><span data-stu-id="dda37-143">In Visual Studio, you control Package Restore primarily through **Tools** > **Options** > **NuGet Package Manager**:</span></span>

![Sterowanie przywracaniem pakietu za poorednictwem opcji Menedżera pakietów NuGet](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="dda37-145">**Zezwól narzędziu NuGet na pobieranie brakujących pakietów** kontroluje wszystkie formy przywracania pakietu, `packageRestore/enabled` zmieniając ustawienie w [sekcji](../reference/nuget-config-file.md#packagerestore-section) `NuGet.Config` packageRestore pliku, `%AppData%\NuGet\` w systemie Windows lub `~/.nuget/NuGet/` na komputerze Mac/Linux.</span><span class="sxs-lookup"><span data-stu-id="dda37-145">**Allow NuGet to download missing packages** controls all forms of package restore by changing the `packageRestore/enabled` setting in the [packageRestore section](../reference/nuget-config-file.md#packagerestore-section) of the `NuGet.Config` file, at `%AppData%\NuGet\` on Windows, or `~/.nuget/NuGet/` on Mac/Linux.</span></span> <span data-ttu-id="dda37-146">To ustawienie włącza również polecenie **Przywróć pakiety NuGet** w menu kontekstowym rozwiązania w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="dda37-146">This setting also enables the **Restore NuGet Packages** command on the solution's context menu in Visual Studio, .</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```
    
  > [!Note]
  > <span data-ttu-id="dda37-147">Aby globalnie zastąpić to `packageRestore/enabled` ustawienie, należy ustawić zmienną środowiskową **EnableNuGetPackageRestore** z wartością true lub false przed uruchomieniem programu Visual Studio lub rozpoczęciem kompilacji.</span><span class="sxs-lookup"><span data-stu-id="dda37-147">To globally override the `packageRestore/enabled` setting, set the environment variable **EnableNuGetPackageRestore** with a value of True or False before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="dda37-148">**Automatycznie sprawdzaj brakujące pakiety podczas kompilacji w programie Visual Studio** kontroluje automatyczne przywracanie, zmieniając `packageRestore/automatic` ustawienie w `NuGet.Config` [sekcji packageRestore](../reference/nuget-config-file.md#packagerestore-section) pliku.</span><span class="sxs-lookup"><span data-stu-id="dda37-148">**Automatically check for missing packages during build in Visual Studio** controls automatic restore by changing the `packageRestore/automatic` setting in the [packageRestore section](../reference/nuget-config-file.md#packagerestore-section) of the `NuGet.Config` file.</span></span> <span data-ttu-id="dda37-149">Gdy ta opcja jest ustawiona na wartość true, uruchomienie kompilacji z programu Visual Studio automatycznie przywraca wszystkie brakujące pakiety.</span><span class="sxs-lookup"><span data-stu-id="dda37-149">When this option is set to True, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="dda37-150">To ustawienie nie ma wpływu na kompilacje wykonywane z wiersza polecenia programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="dda37-150">This setting doesn't affect builds run from the MSBuild command line.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="dda37-151">Aby włączyć lub wyłączyć Przywracanie pakietów dla wszystkich użytkowników na komputerze, deweloper lub firma może dodać ustawienia konfiguracji do pliku globalnego `nuget.config` .</span><span class="sxs-lookup"><span data-stu-id="dda37-151">To enable or disable Package Restore for all users on a computer, a developer or company can add the configuration settings to the global `nuget.config` file.</span></span> <span data-ttu-id="dda37-152">Globalnie `nuget.config` znajduje się w `%ProgramData%\NuGet\Config`systemie Windows, czasami w ramach `\{IDE}\{Version}\{SKU}\` określonego folderu programu Visual Studio lub na komputerze Mac/ `~/.local/share`Linux pod adresem.</span><span class="sxs-lookup"><span data-stu-id="dda37-152">The global `nuget.config` is in Windows at `%ProgramData%\NuGet\Config`, sometimes under a specific `\{IDE}\{Version}\{SKU}\` Visual Studio folder, or in Mac/Linux at `~/.local/share`.</span></span> <span data-ttu-id="dda37-153">Indywidualni użytkownicy mogą następnie wybiórczo włączać przywracanie zgodnie z potrzebami na poziomie projektu.</span><span class="sxs-lookup"><span data-stu-id="dda37-153">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="dda37-154">Aby uzyskać więcej informacji o tym, jak program NuGet ustala priorytety wielu plików konfiguracji, zobacz [popularne konfiguracje NuGet](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span><span class="sxs-lookup"><span data-stu-id="dda37-154">For more details on how NuGet prioritizes multiple config files, see [Common NuGet configurations](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span></span>

> [!Important]
> <span data-ttu-id="dda37-155">Jeśli edytujesz `packageRestore` ustawienia bezpośrednio w programie `nuget.config`, uruchom ponownie program Visual Studio, aby okno dialogowe **Opcje** pokazywało bieżące wartości.</span><span class="sxs-lookup"><span data-stu-id="dda37-155">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio, so that the **Options** dialog box shows the current values.</span></span>

## <a name="constrain-package-versions-with-restore"></a><span data-ttu-id="dda37-156">Ogranicz wersje pakietów przy użyciu funkcji przywracania</span><span class="sxs-lookup"><span data-stu-id="dda37-156">Constrain package versions with restore</span></span>

<span data-ttu-id="dda37-157">Gdy pakiet NuGet przywraca pakiety za pomocą dowolnej metody, przestrzega ograniczeń określonych w `packages.config` lub pliku projektu:</span><span class="sxs-lookup"><span data-stu-id="dda37-157">When NuGet restores packages through any method, it honors any constraints you specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="dda37-158">W `packages.config`programie można określić zakres wersji `allowedVersion` we właściwości zależności.</span><span class="sxs-lookup"><span data-stu-id="dda37-158">In `packages.config`, you can specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="dda37-159">Aby uzyskać więcej informacji, zobacz [ograniczanie wersji uaktualnienia](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions) .</span><span class="sxs-lookup"><span data-stu-id="dda37-159">See [Constrain upgrade versions](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions) for more information.</span></span> <span data-ttu-id="dda37-160">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="dda37-160">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="dda37-161">W pliku projektu można użyć PackageReference, aby określić zakres zależności bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="dda37-161">In a project file, you can use PackageReference to specify a dependency's range directly.</span></span> <span data-ttu-id="dda37-162">Przykład:</span><span class="sxs-lookup"><span data-stu-id="dda37-162">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="dda37-163">We wszystkich przypadkach należy użyć notacji opisanej w artykule [przechowywanie wersji pakietu](../reference/package-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="dda37-163">In all cases, use the notation described in [Package versioning](../reference/package-versioning.md).</span></span>

## <a name="force-restore-from-package-sources"></a><span data-ttu-id="dda37-164">Wymuś przywracanie ze źródeł pakietów</span><span class="sxs-lookup"><span data-stu-id="dda37-164">Force restore from package sources</span></span>

<span data-ttu-id="dda37-165">Domyślnie operacje przywracania NuGet używają pakietów z folderów globalne i *pakiety* *pamięci podręcznej http* , które są opisane w temacie [Zarządzanie pakietami globalnymi i folderami pamięci](managing-the-global-packages-and-cache-folders.md)podręcznej.</span><span class="sxs-lookup"><span data-stu-id="dda37-165">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described in [Manage the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="dda37-166">Aby uniknąć używania folderu *Global-Packages* , wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="dda37-166">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="dda37-167">Wyczyść folder przy użyciu `nuget locals global-packages -clear` lub `dotnet nuget locals global-packages --clear`.</span><span class="sxs-lookup"><span data-stu-id="dda37-167">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`.</span></span>
- <span data-ttu-id="dda37-168">Tymczasowo Zmień lokalizację folderu *Global-Packages* przed operacją przywracania, używając jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="dda37-168">Temporarily change the location of the *global-packages* folder before the restore operation, using one of the following methods:</span></span>
  - <span data-ttu-id="dda37-169">Ustaw zmienną środowiskową NUGET_PACKAGES na inny folder.</span><span class="sxs-lookup"><span data-stu-id="dda37-169">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="dda37-170">Utwórz plik, który ustawia `globalPackagesFolder` (jeśli jest używany PackageReference) `repositoryPath` lub (Jeśli `packages.config`jest używany) do innego folderu. `NuGet.Config`</span><span class="sxs-lookup"><span data-stu-id="dda37-170">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder.</span></span> <span data-ttu-id="dda37-171">Aby uzyskać więcej informacji, zobacz [Ustawienia konfiguracji](../reference/nuget-config-file.md#config-section).</span><span class="sxs-lookup"><span data-stu-id="dda37-171">For more information, see [configuration settings](../reference/nuget-config-file.md#config-section).</span></span>
  - <span data-ttu-id="dda37-172">Tylko MSBuild: Określ inny folder z `RestorePackagesPath` właściwością.</span><span class="sxs-lookup"><span data-stu-id="dda37-172">MSBuild only: Specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="dda37-173">Aby uniknąć używania pamięci podręcznej dla źródeł HTTP, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="dda37-173">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="dda37-174">Użyj opcji with `nuget restore` lub`--no-cache` opcji z`dotnet restore`opcją. `-NoCache`</span><span class="sxs-lookup"><span data-stu-id="dda37-174">Use the `-NoCache` option with `nuget restore`, or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="dda37-175">Te opcje nie wpływają na operacje przywracania za pomocą Menedżera pakietów lub konsoli programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="dda37-175">These options don't affect restore operations through the Visual Studio Package Manager or console.</span></span>
- <span data-ttu-id="dda37-176">Wyczyść pamięć podręczną `nuget locals http-cache -clear` przy `dotnet nuget locals http-cache --clear`użyciu lub.</span><span class="sxs-lookup"><span data-stu-id="dda37-176">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="dda37-177">Tymczasowo Ustaw zmienną środowiskową NUGET_HTTP_CACHE_PATH na inny folder.</span><span class="sxs-lookup"><span data-stu-id="dda37-177">Temporarily set the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="migrate-to-automatic-package-restore-visual-studio"></a><span data-ttu-id="dda37-178">Migrowanie do automatycznego przywracania pakietów (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="dda37-178">Migrate to automatic package restore (Visual Studio)</span></span>

<span data-ttu-id="dda37-179">W przypadku programu NuGet 2,6 i wcześniejszego przywracanie pakietu programu MSBuild zostało wcześniej obsługiwane, ale nie jest już prawdziwe.</span><span class="sxs-lookup"><span data-stu-id="dda37-179">For NuGet 2.6 and earlier, an MSBuild-integrated package restore was previously supported but that is no longer true.</span></span> <span data-ttu-id="dda37-180">(Zwykle jest to możliwe po kliknięciu prawym przyciskiem myszy rozwiązania w programie Visual Studio i wybraniu opcji **Włącz przywracanie pakietu NuGet**).</span><span class="sxs-lookup"><span data-stu-id="dda37-180">(It was typically enabled by right-clicking a solution in Visual Studio and selecting **Enable NuGet Package Restore**).</span></span> <span data-ttu-id="dda37-181">Jeśli projekt używa przestarzałego przywracania pakietu MSBuild, należy przeprowadzić migrację do automatycznego przywracania pakietów.</span><span class="sxs-lookup"><span data-stu-id="dda37-181">If your project uses the deprecated MSBuild-integrated package restore, please migrate to automatic package restore.</span></span>

<span data-ttu-id="dda37-182">Projekty korzystające z funkcji przywracania pakietów zintegrowanych z programem MSBuild zwykle zawierają folder *. NuGet* z trzema plikami: *NuGet. config*, *NuGet. exe*i *NuGet. targets*.</span><span class="sxs-lookup"><span data-stu-id="dda37-182">Projects that use MSBuild-Integrated package restore typically contain a *.nuget* folder with three files: *NuGet.config*, *nuget.exe*, and *NuGet.targets*.</span></span> <span data-ttu-id="dda37-183">Obecność pliku *NuGet. targets* określa, czy NuGet będzie nadal używać podejścia MSBuild-untegrated, więc ten plik musi zostać usunięty podczas migracji.</span><span class="sxs-lookup"><span data-stu-id="dda37-183">The presence of a *NuGet.targets* file determines whether NuGet will continue to use the MSBuild-untegrated approach, so this file must be removed during the migration.</span></span>

<span data-ttu-id="dda37-184">Aby przeprowadzić migrację do automatycznego przywracania pakietów:</span><span class="sxs-lookup"><span data-stu-id="dda37-184">To migrate to automatic package restore:</span></span>

1. <span data-ttu-id="dda37-185">Zamknij program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="dda37-185">Close Visual Studio.</span></span>
2. <span data-ttu-id="dda37-186">DELETE *. NuGet/NuGet. exe* i *. NuGet/NuGet. targets*.</span><span class="sxs-lookup"><span data-stu-id="dda37-186">Delete *.nuget/nuget.exe* and *.nuget/NuGet.targets*.</span></span>
3. <span data-ttu-id="dda37-187">Dla każdego pliku projektu, Usuń `<RestorePackages>` element i Usuń odwołania do *NuGet. targets*.</span><span class="sxs-lookup"><span data-stu-id="dda37-187">For each project file, remove the `<RestorePackages>` element and remove any reference to *NuGet.targets*.</span></span>

<span data-ttu-id="dda37-188">Aby przetestować automatyczne przywracanie pakietów:</span><span class="sxs-lookup"><span data-stu-id="dda37-188">To test the automatic package restore:</span></span>

1. <span data-ttu-id="dda37-189">Usuń folder *Packages* z rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="dda37-189">Remove the *packages* folder from the solution.</span></span>
2. <span data-ttu-id="dda37-190">Otwórz rozwiązanie w programie Visual Studio i Rozpocznij kompilację.</span><span class="sxs-lookup"><span data-stu-id="dda37-190">Open the solution in Visual Studio and start a build.</span></span>

   <span data-ttu-id="dda37-191">Automatyczne przywracanie pakietów powinno pobierać i instalować każdy pakiet zależności bez dodawania ich do kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="dda37-191">Automatic package restore should download and install each dependency package, without adding them to source control.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="dda37-192">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="dda37-192">Troubleshooting</span></span>

<span data-ttu-id="dda37-193">Zobacz [Rozwiązywanie problemów z przywracaniem pakietu](package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="dda37-193">See [Troubleshoot package restore](package-restore-troubleshooting.md).</span></span>
