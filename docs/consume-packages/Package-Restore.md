---
title: Przywracanie pakietu NuGet
description: Omówienie sposobu przywracania NuGet pakietów projektu zależy od, np. Wyłącz przywracania i ograniczenia wersji.
author: karann-msft
ms.author: karann
ms.date: 06/24/2019
ms.topic: conceptual
ms.openlocfilehash: e85d8cc3fd9492118bd8f34cfd05f20a9724c281
ms.sourcegitcommit: 0dea3b153ef823230a9d5f38351b7cef057cb299
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/12/2019
ms.locfileid: "67842337"
---
# <a name="package-restore-options"></a><span data-ttu-id="decea-103">Opcje przywracania pakietów</span><span class="sxs-lookup"><span data-stu-id="decea-103">Package Restore options</span></span>

<span data-ttu-id="decea-104">Aby promować bardziej przejrzyste środowisko deweloperskie i zmniejszyć rozmiar repozytorium, NuGet **Przywracanie pakietów** instaluje wszystkie zależności projektu, wymienione w pliku projektu lub `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="decea-104">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all of a project's dependencies listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="decea-105">.NET Core 2.0 + `dotnet build` i `dotnet run` poleceń wykonaj Przywracanie pakietu automatyczne.</span><span class="sxs-lookup"><span data-stu-id="decea-105">The .NET Core 2.0+ `dotnet build` and `dotnet run` commands do an automatic package restore.</span></span> <span data-ttu-id="decea-106">Program Visual Studio można przywrócić pakietów automatycznie podczas tworzenia projektu i w dowolnym momencie za pomocą programu Visual Studio, można przywrócić pakietów `nuget restore`, `dotnet restore`i xbuild na platformy Mono.</span><span class="sxs-lookup"><span data-stu-id="decea-106">Visual Studio can restore packages automatically when it builds a project, and you can restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="decea-107">Przywracanie pakietu gwarantuje, że projektu wszystkie zależności są dostępne, bez konieczności przechowywania ich w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="decea-107">Package Restore makes sure that all a project's dependencies are available, without having to store them in source control.</span></span> <span data-ttu-id="decea-108">Aby skonfigurować repozytorium kontroli źródła, aby wykluczyć pliki binarne pakietu, zobacz [pakiety i kontrola źródła](../consume-packages/packages-and-source-control.md).</span><span class="sxs-lookup"><span data-stu-id="decea-108">To configure your source control repository to exclude the package binaries, see [Packages and source control](../consume-packages/packages-and-source-control.md).</span></span> 

## <a name="package-restore-overview"></a><span data-ttu-id="decea-109">Omówienie przywracania pakietu</span><span class="sxs-lookup"><span data-stu-id="decea-109">Package Restore overview</span></span>

<span data-ttu-id="decea-110">Przywracanie pakietu najpierw instaluje bezpośrednich zależności projektu, zgodnie z potrzebami, a następnie instaluje wszystkie zależności tych pakietów w całym wykres zależności całego.</span><span class="sxs-lookup"><span data-stu-id="decea-110">Package Restore first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="decea-111">Jeśli pakiet nie jest już zainstalowany, NuGet najpierw próbuje pobrać go z [pamięci podręcznej](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="decea-111">If a package isn't already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="decea-112">Jeśli pakiet jest w pamięci podręcznej, NuGet próbuje pobrać pakiet ze wszystkich źródeł włączonych na liście u **narzędzia** > **opcje** > **Menedżera pakietów NuGet**   >  **Pakietu źródeł** w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="decea-112">If the package isn't in the cache, NuGet tries to download the package from all enabled sources in the list at **Tools** > **Options** > **NuGet Package Manager** > **Package Sources** in Visual Studio.</span></span> <span data-ttu-id="decea-113">Podczas przywracania NuGet ignoruje kolejność źródeł pakietów i używa pakietów z dowolnego źródła najpierw do odpowiadania na żądania.</span><span class="sxs-lookup"><span data-stu-id="decea-113">During restore, NuGet ignores the order of package sources, and uses the package from whichever source is first to respond to requests.</span></span> <span data-ttu-id="decea-114">Aby uzyskać więcej informacji na temat zachowania NuGet, zobacz [NuGet typowe konfiguracje](Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="decea-114">For more information about how NuGet behaves, see [Common NuGet configurations](Configuring-NuGet-Behavior.md).</span></span> 

> [!Note]
> <span data-ttu-id="decea-115">NuGet nie oznacza nieudanej próbie przywrócenia pakietów, dopóki wszystkie źródła zostały zaewidencjonowane.</span><span class="sxs-lookup"><span data-stu-id="decea-115">NuGet doesn't indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="decea-116">W tym czasie NuGet zgłasza błąd tylko ostatni źródła na liście.</span><span class="sxs-lookup"><span data-stu-id="decea-116">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="decea-117">Ten błąd oznacza, że pakiet nie był dostępny na *wszelkie* innych źródeł, mimo że błędów nie są wyświetlane dla każdego z tych źródeł indywidualnie.</span><span class="sxs-lookup"><span data-stu-id="decea-117">The error implies that the package wasn't present on *any* of the other sources, even though errors aren't shown for each of those sources individually.</span></span>

## <a name="restore-packages"></a><span data-ttu-id="decea-118">Przywracanie pakietów</span><span class="sxs-lookup"><span data-stu-id="decea-118">Restore packages</span></span>

<span data-ttu-id="decea-119">Przywracanie pakietów można wyzwalać w dowolnym z następujących sposobów:</span><span class="sxs-lookup"><span data-stu-id="decea-119">You can trigger Package Restore in any of the following ways:</span></span>

- <span data-ttu-id="decea-120">**Visual Studio**: W programie Visual Studio, Windows użyj jednej z następujących metod.</span><span class="sxs-lookup"><span data-stu-id="decea-120">**Visual Studio**: In Visual Studio on Windows, use one of the following methods.</span></span>

    - <span data-ttu-id="decea-121">Przywróć pakiety automatycznie.</span><span class="sxs-lookup"><span data-stu-id="decea-121">Restore packages automatically.</span></span> <span data-ttu-id="decea-122">Przywracanie pakietu odbywa się automatycznie, gdy tworzenie projektu z szablonu lub kompilowania projektu, z zastrzeżeniem opcje w [włączać i wyłączać przywracanie pakietu](#enable-and-disable-package-restore-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="decea-122">Package Restore happens automatically when you create a project from a template or build a project, subject to the options in [Enable and disable package restore](#enable-and-disable-package-restore-visual-studio).</span></span> <span data-ttu-id="decea-123">W pakiecie NuGet 4.0 + Przywracanie również odbywa się automatycznie po wprowadzeniu zmian do projektu zestawu SDK stylu (zazwyczaj projektu .NET Core lub .NET Standard).</span><span class="sxs-lookup"><span data-stu-id="decea-123">In NuGet 4.0+, restore also happens automatically when you make changes to a SDK-style project (typically a .NET Core or .NET Standard project).</span></span>

    - <span data-ttu-id="decea-124">Przywróć pakiety ręcznie.</span><span class="sxs-lookup"><span data-stu-id="decea-124">Restore packages manually.</span></span> <span data-ttu-id="decea-125">Aby przywrócić ręcznie, kliknij prawym przyciskiem myszy rozwiązanie w **Eksploratora rozwiązań** i wybierz **Przywróć pakiety NuGet**.</span><span class="sxs-lookup"><span data-stu-id="decea-125">To restore manually, right-click the solution in **Solution Explorer** and select **Restore NuGet Packages**.</span></span> <span data-ttu-id="decea-126">Jeśli co najmniej jeden z indywidualnych pakietów nadal nie są zainstalowane prawidłowo, **Eksploratora rozwiązań** znajduje się ikona błąd.</span><span class="sxs-lookup"><span data-stu-id="decea-126">If one or more individual packages still aren't installed properly, **Solution Explorer** shows an error icon.</span></span> <span data-ttu-id="decea-127">Kliknij prawym przyciskiem myszy i wybierz **Zarządzaj pakietami NuGet**i użyj **Menedżera pakietów** odinstalować i ponownie zainstalować pakiety, których to dotyczy.</span><span class="sxs-lookup"><span data-stu-id="decea-127">Right-click and select **Manage NuGet Packages**, and use **Package Manager** to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="decea-128">Aby uzyskać więcej informacji, zobacz [pakiety ponownej instalacji i aktualizacji](../consume-packages/reinstalling-and-updating-packages.md)</span><span class="sxs-lookup"><span data-stu-id="decea-128">For more information, see [Reinstall and update packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

    <span data-ttu-id="decea-129">Jeśli zostanie wyświetlony błąd "ten projekt odwołuje się do pakietów NuGet, których brakuje na tym komputerze" lub "co najmniej jednego pakietu NuGet muszą zostać przywrócone, ale nie może być, ponieważ nie udzielono zgody," [włączyć automatycznego przywracania](#enable-and-disable-package-restore-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="decea-129">If you see the error "This project references NuGet package(s) that are missing on this computer," or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," [enable automatic restore](#enable-and-disable-package-restore-visual-studio).</span></span> <span data-ttu-id="decea-130">Zobacz też [Przeprowadź migrację do przywracania pakietów automatyczne](#migrate-to-automatic-package-restore-visual-studio) i [Przywracanie pakietów Rozwiązywanie problemów z](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="decea-130">Also, see [Migrate to automatic package restore](#migrate-to-automatic-package-restore-visual-studio) and [Package Restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

- <span data-ttu-id="decea-131">**Wiersz polecenia DotNet**: W wierszu polecenia przejdź do folderu, który zawiera projekt, a następnie użyj [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) polecenie, aby przywrócić pakiety wymienione w pliku projektu za pomocą [PackageReference](../consume-packages/package-references-in-project-files.md).</span><span class="sxs-lookup"><span data-stu-id="decea-131">**dotnet CLI**: In the command line, switch to the folder that contains your project, and then use the [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) command to restore packages listed in the project file with [PackageReference](../consume-packages/package-references-in-project-files.md).</span></span> <span data-ttu-id="decea-132">Za pomocą platformy .NET Core 2.0 i nowszych przywracania odbywa się automatycznie przy użyciu `dotnet build` i `dotnet run` poleceń.</span><span class="sxs-lookup"><span data-stu-id="decea-132">With .NET Core 2.0 and later, restore happens automatically with the `dotnet build` and `dotnet run` commands.</span></span>  

- <span data-ttu-id="decea-133">**Interfejs wiersza polecenia nuget.exe**: W wierszu polecenia przejdź do folderu, który zawiera projekt, a następnie użyj [Przywracanie pakietów nuget](../tools/cli-ref-restore.md) polecenie, aby przywrócić pakiety wymienione w pliku projektu lub rozwiązania lub w `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="decea-133">**nuget.exe CLI**: In the command line, switch to the folder that contains your project, and then use the [nuget restore](../tools/cli-ref-restore.md) command to restore packages listed in a project or solution file, or in `packages.config`.</span></span> 

- <span data-ttu-id="decea-134">**Program MSBuild**: Użyj [msbuild - t: Przywracanie](../reference/msbuild-targets.md#restore-target) polecenie, aby przywrócić pakiety wymienione w pliku projektu za pomocą funkcji PackageReference.</span><span class="sxs-lookup"><span data-stu-id="decea-134">**MSBuild**: Use the [msbuild -t:restore](../reference/msbuild-targets.md#restore-target) command to restore packages listed in the project file with PackageReference.</span></span> <span data-ttu-id="decea-135">To polecenie jest dostępne tylko w NuGet 4.x+ i MSBuild 15.1 +, które są dołączone do programu Visual Studio 2017 i nowsze wersje.</span><span class="sxs-lookup"><span data-stu-id="decea-135">This command is available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017 and higher versions.</span></span> <span data-ttu-id="decea-136">Zarówno `nuget restore` i `dotnet restore` to polecenie dotyczy projektów.</span><span class="sxs-lookup"><span data-stu-id="decea-136">Both `nuget restore` and `dotnet restore` use this command for applicable projects.</span></span>

- <span data-ttu-id="decea-137">**Potoki usługi Azure**: Podczas tworzenia definicji kompilacji w potokach platformy Azure, obejmują NuGet [przywrócić](/azure/devops/pipelines/tasks/package/nuget#restore-nuget-packages) lub .NET Core [przywrócić](/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops) zadania w definicji przed dowolnego zadania kompilacji.</span><span class="sxs-lookup"><span data-stu-id="decea-137">**Azure Pipelines**: When you create a build definition in Azure Pipelines, include the NuGet [restore](/azure/devops/pipelines/tasks/package/nuget#restore-nuget-packages) or .NET Core [restore](/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops) task in the definition before any build tasks.</span></span> <span data-ttu-id="decea-138">Domyślnie kilka szablonów kompilacji zawierają zadania przywracania.</span><span class="sxs-lookup"><span data-stu-id="decea-138">Some build templates include the restore task by default.</span></span>

- <span data-ttu-id="decea-139">**Azure DevOps Server**: Azure DevOps Server i TFS 2013 lub nowszym automatycznie przywrócić, pakietów podczas kompilacji, jeśli używasz programu TFS 2013 lub nowszej kompilacji zespołowej szablonu.</span><span class="sxs-lookup"><span data-stu-id="decea-139">**Azure DevOps Server**: Azure DevOps Server and TFS 2013 and later automatically restore packages during build, if you're using a TFS 2013 or later Team Build template.</span></span> <span data-ttu-id="decea-140">W przypadku starszych wersji programu TFS obejmuje kroku kompilacji do uruchamiania z opcją wiersza polecenia restore lub opcjonalnie migracji szablonu kompilacji do nowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="decea-140">For earlier TFS versions, you can include a build step to run a command-line restore option, or optionally migrate the build template to a later version.</span></span> <span data-ttu-id="decea-141">Aby uzyskać więcej informacji, zobacz [Konfigurowanie przywracania pakietów w programie Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="decea-141">For more information, see [Set up package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="enable-and-disable-package-restore-visual-studio"></a><span data-ttu-id="decea-142">Włączanie i wyłączanie Przywracanie pakietu (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="decea-142">Enable and disable package restore (Visual Studio)</span></span>

<span data-ttu-id="decea-143">W programie Visual Studio, możesz kontrolować, głównie za pomocą Przywracanie pakietów **narzędzia** > **opcje** > **Menedżera pakietów NuGet**:</span><span class="sxs-lookup"><span data-stu-id="decea-143">In Visual Studio, you control Package Restore primarily through **Tools** > **Options** > **NuGet Package Manager**:</span></span>

![Przywracanie pakietów sterowania za pomocą opcji Menedżer pakietów NuGet](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="decea-145">**Zezwalaj na rozszerzenie NuGet, aby pobrać brakujące pakiety** kontroluje wszystkie formularze Przywracanie pakietu, zmieniając `packageRestore/enabled` w [sekcji packageRestore](../reference/nuget-config-file.md#packagerestore-section) z `NuGet.Config` pliku na `%AppData%\NuGet\` na Windows, lub `~/.nuget/NuGet/` w systemie Mac/Linux.</span><span class="sxs-lookup"><span data-stu-id="decea-145">**Allow NuGet to download missing packages** controls all forms of package restore by changing the `packageRestore/enabled` setting in the [packageRestore section](../reference/nuget-config-file.md#packagerestore-section) of the `NuGet.Config` file, at `%AppData%\NuGet\` on Windows, or `~/.nuget/NuGet/` on Mac/Linux.</span></span> <span data-ttu-id="decea-146">To ustawienie umożliwia również **Przywróć pakiety NuGet** polecenia w menu kontekstowym rozwiązania w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="decea-146">This setting also enables the **Restore NuGet Packages** command on the solution's context menu in Visual Studio, .</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```
    
  > [!Note]
  > <span data-ttu-id="decea-147">Aby zastąpić globalnie `packageRestore/enabled` ustawienie, ustaw zmienną środowiskową **EnableNuGetPackageRestore** o wartości True lub False przed uruchomieniem programu Visual Studio lub uruchamianie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="decea-147">To globally override the `packageRestore/enabled` setting, set the environment variable **EnableNuGetPackageRestore** with a value of True or False before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="decea-148">**Automatyczne sprawdzenie dostępności dla brakujących pakietów podczas kompilacji w programie Visual Studio** kontroluje automatycznego przywracania, zmieniając `packageRestore/automatic` w [sekcji packageRestore](../reference/nuget-config-file.md#packagerestore-section) z `NuGet.Config` pliku.</span><span class="sxs-lookup"><span data-stu-id="decea-148">**Automatically check for missing packages during build in Visual Studio** controls automatic restore by changing the `packageRestore/automatic` setting in the [packageRestore section](../reference/nuget-config-file.md#packagerestore-section) of the `NuGet.Config` file.</span></span> <span data-ttu-id="decea-149">Gdy ta opcja jest ustawiona na wartość True, uruchamianie kompilacji w programie Visual Studio automatycznie przywraca wszystkie brakujące pakiety.</span><span class="sxs-lookup"><span data-stu-id="decea-149">When this option is set to True, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="decea-150">To ustawienie nie wpływa na kompilacje uruchamiane z wiersza polecenia programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="decea-150">This setting doesn't affect builds run from the MSBuild command line.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="decea-151">Aby włączyć lub wyłączyć Przywracanie pakietów dla wszystkich użytkowników na komputerze, deweloperów i firmy można dodać ustawień konfiguracji do globalnego `nuget.config` pliku.</span><span class="sxs-lookup"><span data-stu-id="decea-151">To enable or disable Package Restore for all users on a computer, a developer or company can add the configuration settings to the global `nuget.config` file.</span></span> <span data-ttu-id="decea-152">Globalna `nuget.config` znajduje się w Windows na `%ProgramData%\NuGet\Config`, czasami w ramach określonego `\{IDE}\{Version}\{SKU}\` folder programu Visual Studio lub Mac/Linux w `~/.local/share`.</span><span class="sxs-lookup"><span data-stu-id="decea-152">The global `nuget.config` is in Windows at `%ProgramData%\NuGet\Config`, sometimes under a specific `\{IDE}\{Version}\{SKU}\` Visual Studio folder, or in Mac/Linux at `~/.local/share`.</span></span> <span data-ttu-id="decea-153">Poszczególnych użytkowników można selektywnie włączysz przywracania na poziomie projektu.</span><span class="sxs-lookup"><span data-stu-id="decea-153">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="decea-154">Aby uzyskać szczegółowe informacje na temat sposobu NuGet umożliwia określenie wielu plików konfiguracji, zobacz [NuGet typowe konfiguracje](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span><span class="sxs-lookup"><span data-stu-id="decea-154">For more details on how NuGet prioritizes multiple config files, see [Common NuGet configurations](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span></span>

> [!Important]
> <span data-ttu-id="decea-155">Jeśli edytujesz `packageRestore` ustawienia bezpośrednio w `nuget.config`, uruchom ponownie program Visual Studio, tak, aby **opcje** bieżące wartości wyświetlane okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="decea-155">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio, so that the **Options** dialog box shows the current values.</span></span>

## <a name="constrain-package-versions-with-restore"></a><span data-ttu-id="decea-156">Ograniczenie wersji pakietu, dzięki funkcji przywracania</span><span class="sxs-lookup"><span data-stu-id="decea-156">Constrain package versions with restore</span></span>

<span data-ttu-id="decea-157">Gdy NuGet przywraca pakietów przy użyciu dowolnej metody, będzie używana wszelkie ograniczenia określone w `packages.config` lub pliku projektu:</span><span class="sxs-lookup"><span data-stu-id="decea-157">When NuGet restores packages through any method, it honors any constraints you specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="decea-158">W `packages.config`, można określić zakres wersji w `allowedVersion` właściwość zależności.</span><span class="sxs-lookup"><span data-stu-id="decea-158">In `packages.config`, you can specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="decea-159">Zobacz [wersji uaktualnienie Zachowaj](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="decea-159">See [Constrain upgrade versions](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions) for more information.</span></span> <span data-ttu-id="decea-160">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="decea-160">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="decea-161">W pliku projektu można użyć PackageReference do określania zakresu zależności bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="decea-161">In a project file, you can use PackageReference to specify a dependency's range directly.</span></span> <span data-ttu-id="decea-162">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="decea-162">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="decea-163">We wszystkich przypadkach Notacja opisanego w [przechowywanie wersji pakietów](../reference/package-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="decea-163">In all cases, use the notation described in [Package versioning](../reference/package-versioning.md).</span></span>

## <a name="force-restore-from-package-sources"></a><span data-ttu-id="decea-164">Wymusić przywracanie ze źródła pakietu</span><span class="sxs-lookup"><span data-stu-id="decea-164">Force restore from package sources</span></span>

<span data-ttu-id="decea-165">Domyślnie operacje przywracania NuGet używania pakietów *globalnymi pakietami* i *pamięci podręcznej http* foldery, które są opisane w [Zarządzanie globalnymi pakietami i folderamiwpamięcipodręcznej](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="decea-165">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described in [Manage the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="decea-166">Aby uniknąć używania *globalnymi pakietami* folder, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="decea-166">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="decea-167">Wyczyść folderze przy użyciu `nuget locals global-packages -clear` lub `dotnet nuget locals global-packages --clear`.</span><span class="sxs-lookup"><span data-stu-id="decea-167">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`.</span></span>
- <span data-ttu-id="decea-168">Tymczasowo zmienić lokalizację *globalnymi pakietami* folder przed rozpoczęciem operacji przywracania, przy użyciu jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="decea-168">Temporarily change the location of the *global-packages* folder before the restore operation, using one of the following methods:</span></span>
  - <span data-ttu-id="decea-169">Ustaw zmienną środowiskową NUGET_PACKAGES do innego folderu.</span><span class="sxs-lookup"><span data-stu-id="decea-169">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="decea-170">Tworzenie `NuGet.Config` pliku, który ustawia `globalPackagesFolder` (w przypadku korzystania z funkcji PackageReference) lub `repositoryPath` (Jeśli za pomocą `packages.config`) do innego folderu.</span><span class="sxs-lookup"><span data-stu-id="decea-170">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder.</span></span> <span data-ttu-id="decea-171">Aby uzyskać więcej informacji, zobacz [ustawienia konfiguracji](../reference/nuget-config-file.md#config-section).</span><span class="sxs-lookup"><span data-stu-id="decea-171">For more information, see [configuration settings](../reference/nuget-config-file.md#config-section).</span></span>
  - <span data-ttu-id="decea-172">Program MSBuild tylko: Określ inny folder z `RestorePackagesPath` właściwości.</span><span class="sxs-lookup"><span data-stu-id="decea-172">MSBuild only: Specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="decea-173">Aby uniknąć, za pomocą pamięci podręcznej dla źródła HTTP, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="decea-173">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="decea-174">Użyj `-NoCache` z opcją `nuget restore`, lub `--no-cache` z opcją `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="decea-174">Use the `-NoCache` option with `nuget restore`, or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="decea-175">Te opcje nie wpływa na operacje przywracania Menedżera pakietów za pomocą Visual Studio lub konsoli.</span><span class="sxs-lookup"><span data-stu-id="decea-175">These options don't affect restore operations through the Visual Studio Package Manager or console.</span></span>
- <span data-ttu-id="decea-176">Wyczyść pamięć podręczną za pomocą `nuget locals http-cache -clear` lub `dotnet nuget locals http-cache --clear`.</span><span class="sxs-lookup"><span data-stu-id="decea-176">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="decea-177">Tymczasowo ustawić zmienną środowiskową NUGET_HTTP_CACHE_PATH do innego folderu.</span><span class="sxs-lookup"><span data-stu-id="decea-177">Temporarily set the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="migrate-to-automatic-package-restore-visual-studio"></a><span data-ttu-id="decea-178">Migrowanie do przywracania automatycznych pakietu (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="decea-178">Migrate to automatic package restore (Visual Studio)</span></span>

<span data-ttu-id="decea-179">NuGet 2.6 i wcześniej Przywracanie pakietu zintegrowane MSBuild wcześniej był obsługiwany, ale nie jest już wartość true.</span><span class="sxs-lookup"><span data-stu-id="decea-179">For NuGet 2.6 and earlier, an MSBuild-integrated package restore was previously supported but that is no longer true.</span></span> <span data-ttu-id="decea-180">(Zazwyczaj została włączona, kliknij prawym przyciskiem myszy rozwiązanie w programie Visual Studio i wybierając **Włącz Przywracanie pakietów NuGet**).</span><span class="sxs-lookup"><span data-stu-id="decea-180">(It was typically enabled by right-clicking a solution in Visual Studio and selecting **Enable NuGet Package Restore**).</span></span> <span data-ttu-id="decea-181">Jeśli projekt używa przywracania przestarzałych pakietów zintegrowane MSBuild, przeprowadź migrację do pakietu automatycznego przywracania.</span><span class="sxs-lookup"><span data-stu-id="decea-181">If your project uses the deprecated MSBuild-integrated package restore, please migrate to automatic package restore.</span></span>

<span data-ttu-id="decea-182">Projekty używające Przywracanie pakietu zintegrowane MSBuild zwykle zawierają *.nuget* folder o trzy pliki: *Plik NuGet.config*, *nuget.exe*, i *NuGet.targets*.</span><span class="sxs-lookup"><span data-stu-id="decea-182">Projects that use MSBuild-Integrated package restore typically contain a *.nuget* folder with three files: *NuGet.config*, *nuget.exe*, and *NuGet.targets*.</span></span> <span data-ttu-id="decea-183">Obecność *NuGet.targets* plik Określa, czy NuGet będą w dalszym ciągu używać podejścia MSBuild untegrated, więc ten plik musi być usuwana podczas migracji.</span><span class="sxs-lookup"><span data-stu-id="decea-183">The presence of a *NuGet.targets* file determines whether NuGet will continue to use the MSBuild-untegrated approach, so this file must be removed during the migration.</span></span>

<span data-ttu-id="decea-184">Aby przeprowadzić migrację do przywracania pakietów automatyczne:</span><span class="sxs-lookup"><span data-stu-id="decea-184">To migrate to automatic package restore:</span></span>

1. <span data-ttu-id="decea-185">Zamknij program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="decea-185">Close Visual Studio.</span></span>
2. <span data-ttu-id="decea-186">Usuń *.nuget/nuget.exe* i *.nuget/NuGet.targets*.</span><span class="sxs-lookup"><span data-stu-id="decea-186">Delete *.nuget/nuget.exe* and *.nuget/NuGet.targets*.</span></span>
3. <span data-ttu-id="decea-187">Dla każdego pliku projektu, usunąć `<RestorePackages>` elementu i usuń wszelkie odwołanie do *NuGet.targets*.</span><span class="sxs-lookup"><span data-stu-id="decea-187">For each project file, remove the `<RestorePackages>` element and remove any reference to *NuGet.targets*.</span></span>

<span data-ttu-id="decea-188">Aby przetestować Przywracanie pakietu automatyczne:</span><span class="sxs-lookup"><span data-stu-id="decea-188">To test the automatic package restore:</span></span>

1. <span data-ttu-id="decea-189">Usuń *pakietów* folderu z rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="decea-189">Remove the *packages* folder from the solution.</span></span>
2. <span data-ttu-id="decea-190">Otwórz rozwiązanie w programie Visual Studio i uruchomić kompilację.</span><span class="sxs-lookup"><span data-stu-id="decea-190">Open the solution in Visual Studio and start a build.</span></span>

   <span data-ttu-id="decea-191">Przywracanie pakietu automatycznego należy pobrać i zainstalować każdego pakietu zależności bez dodawania ich do kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="decea-191">Automatic package restore should download and install each dependency package, without adding them to source control.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="decea-192">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="decea-192">Troubleshooting</span></span>

<span data-ttu-id="decea-193">Zobacz [Rozwiązywanie problemów z Przywracanie pakietu](package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="decea-193">See [Troubleshoot package restore](package-restore-troubleshooting.md).</span></span>
