---
title: Przywracanie pakietu NuGet
description: Omówienie, jak NuGet przywraca pakietów, od których zależy od projektu, w tym sposób wyłączania przywracania i ograniczenia wersji.
author: karann-msft
ms.author: karann
ms.date: 03/16/2018
ms.topic: conceptual
ms.openlocfilehash: 3e19d0ee6986021f0a23128f2e62e739d970ac9a
ms.sourcegitcommit: b6810860b77b2d50aab031040b047c20a333aca3
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/28/2019
ms.locfileid: "67426683"
---
# <a name="package-restore"></a><span data-ttu-id="80a58-103">Przywracanie pakietu</span><span class="sxs-lookup"><span data-stu-id="80a58-103">Package Restore</span></span>

<span data-ttu-id="80a58-104">Aby promować bardziej przejrzyste środowisko deweloperskie i zmniejszyć rozmiar repozytorium, NuGet **Przywracanie pakietów** instaluje zależności projektu wszystkie wymienione w jednym pliku projektu lub `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="80a58-104">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all a project's dependencies as listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="80a58-105">Program Visual Studio można przywrócić pakietów automatycznie, podczas kompilowania projektu.</span><span class="sxs-lookup"><span data-stu-id="80a58-105">Visual Studio can restore packages automatically when a project is built.</span></span> <span data-ttu-id="80a58-106">`dotnet build` i `dotnet run` przeprowadzić automatycznego przywracania poleceń (.NET Core 2.0 +).</span><span class="sxs-lookup"><span data-stu-id="80a58-106">The `dotnet build` and `dotnet run` commands (.NET Core 2.0+) also perform an automatic restore.</span></span> <span data-ttu-id="80a58-107">W dowolnym momencie za pomocą programu Visual Studio, można przywrócić pakietów `nuget restore`, `dotnet restore`i xbuild na platformy Mono.</span><span class="sxs-lookup"><span data-stu-id="80a58-107">You can also restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="80a58-108">Przywracanie pakietu gwarantuje, że projektu wszystkie zależności są dostępne bez przechowywania tych pakietów w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="80a58-108">Package restore makes sure that all a project's dependencies are available without storing those packages in source control.</span></span> <span data-ttu-id="80a58-109">Zobacz [pakiety i kontrola źródła](../consume-packages/packages-and-source-control.md) dotyczące sposobu konfigurowania repozytorium, aby wykluczyć pliki binarne pakietu.</span><span class="sxs-lookup"><span data-stu-id="80a58-109">See [Packages and Source Control](../consume-packages/packages-and-source-control.md) on how to configure your repository to exclude package binaries.</span></span>

## <a name="package-restore-overview"></a><span data-ttu-id="80a58-110">Omówienie przywracania pakietu</span><span class="sxs-lookup"><span data-stu-id="80a58-110">Package restore overview</span></span>

<span data-ttu-id="80a58-111">Trwa przywracanie pakietów najpierw instaluje bezpośredniej zależności projektu, zgodnie z potrzebami, a następnie instaluje wszystkie zależności tych pakietów w całym wykres zależności całego.</span><span class="sxs-lookup"><span data-stu-id="80a58-111">Restoring packages first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="80a58-112">Jeśli pakiet nie jest już zainstalowany, NuGet najpierw próbuje pobrać go z [pamięci podręcznej](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="80a58-112">If a package is not already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="80a58-113">Jeśli pakiet nie jest w pamięci podręcznej, NuGet następnie próbuje pobrać pakiet ze wszystkich źródeł włączonych (zobacz [NuGet typowe konfiguracje](Configuring-NuGet-Behavior.md); źródła są również wyświetlane w **Narzędzia > Opcje > Menedżer pakietów NuGet > Źródła pakietów** listy w programie Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="80a58-113">If the package is not in the cache, NuGet then attempts to download the package from all enabled sources (see [Common NuGet configurations](Configuring-NuGet-Behavior.md); sources also appear in the  **Tools > Options > NuGet Package Manager > Package Sources** list in Visual Studio).</span></span> <span data-ttu-id="80a58-114">Podczas przywracania NuGet ignoruje kolejność źródeł pakietów przy użyciu pakietów z dowolnego źródła najpierw do odpowiadania na żądania.</span><span class="sxs-lookup"><span data-stu-id="80a58-114">During restore, NuGet ignores the order of package sources, using the package from whichever source is first to respond to requests.</span></span>

> [!Note]
> <span data-ttu-id="80a58-115">NuGet nie wskazuje nieudanej próbie przywrócenia pakietów, dopóki wszystkie źródła zostały zaewidencjonowane.</span><span class="sxs-lookup"><span data-stu-id="80a58-115">NuGet does not indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="80a58-116">W tym czasie NuGet zgłasza błąd tylko ostatni źródła na liście.</span><span class="sxs-lookup"><span data-stu-id="80a58-116">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="80a58-117">Ten błąd oznacza, że pakiet nie był dostępny na *wszelkie* innych źródeł, mimo że błędów nie są wyświetlane dla każdego z tych źródeł indywidualnie.</span><span class="sxs-lookup"><span data-stu-id="80a58-117">The error implies that the package wasn't present on *any* of the other sources, even though errors are not shown for each of those sources individually.</span></span>

<span data-ttu-id="80a58-118">Przywracanie pakietu jest wyzwalany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="80a58-118">Package restore is triggered in the following ways:</span></span>

- <span data-ttu-id="80a58-119">**Wiersz polecenia DotNet**: Użyj [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) polecenia, które pakiety wymienione w pliku projektu (zobacz [PackageReference](../consume-packages/package-references-in-project-files.md)).</span><span class="sxs-lookup"><span data-stu-id="80a58-119">**dotnet CLI**: use the [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) command, which restores packages listed in the project file (see [PackageReference](../consume-packages/package-references-in-project-files.md)).</span></span> <span data-ttu-id="80a58-120">Za pomocą platformy .NET Core 2.0 i nowszych przywracania odbywa się automatycznie przy użyciu `dotnet build` i `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="80a58-120">With .NET Core 2.0 and later, restore is done automatically with `dotnet build` and `dotnet run`.</span></span>

- <span data-ttu-id="80a58-121">**Interfejs użytkownika Menedżera pakietów (Visual Studio Windows)** : Pakiety zostaną przywrócone automatycznie podczas tworzenia projektu z szablonu, a podczas kompilowania projektu (podlegają opcji można znaleźć w [Włączanie i wyłączanie Przywracanie pakietu](#enabling-and-disabling-package-restore)).</span><span class="sxs-lookup"><span data-stu-id="80a58-121">**Package Manager UI (Visual Studio on Windows)**: Packages are restored automatically when creating a project from a template and when building a project (subject to the option described in [Enabling and disabling package restore](#enabling-and-disabling-package-restore)).</span></span> <span data-ttu-id="80a58-122">W pakiecie NuGet 4.0 + Przywracanie również odbywa się automatycznie podczas zmiany zostały wprowadzone do projektu na podstawie zestawu .NET Core SDK.</span><span class="sxs-lookup"><span data-stu-id="80a58-122">In NuGet 4.0+, restore also happens automatically when changes are made to a .NET Core SDK-based project.</span></span>

    <span data-ttu-id="80a58-123">Aby przywrócić ręcznie, kliknij prawym przyciskiem myszy rozwiązanie w Eksploratorze rozwiązań i wybierz **Przywróć pakiety NuGet**.</span><span class="sxs-lookup"><span data-stu-id="80a58-123">To restore manually, right-click the solution in Solution Explorer and select **Restore NuGet Packages**.</span></span> <span data-ttu-id="80a58-124">Jeśli co najmniej jeden z indywidualnych pakietów są nadal nie jest poprawnie zainstalowany (co oznacza, że Eksplorator rozwiązań pokazuje ikona błędu), a następnie użyj interfejsu użytkownika Menedżera pakietów, aby odinstalować i ponownie zainstalować pakiety, których to dotyczy.</span><span class="sxs-lookup"><span data-stu-id="80a58-124">If one or more individual packages are still not installed properly (meaning that Solution Explorer shows an error icon), then use the Package Manager UI to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="80a58-125">Zobacz [ponowne zainstalowanie i aktualizowanie pakietów](../consume-packages/reinstalling-and-updating-packages.md)</span><span class="sxs-lookup"><span data-stu-id="80a58-125">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

    <span data-ttu-id="80a58-126">Jeśli zostanie wyświetlony błąd "ten projekt odwołuje się do pakietów NuGet, których brakuje na tym komputerze" lub "co najmniej jednego pakietu NuGet muszą zostać przywrócone, ale nie może być, ponieważ nie udzielono zgody", włączyć automatycznego przywracania, postępując zgodnie z instrukcjami zawartymi w sekcji [Włączanie i wyłączanie Przywracanie pakietu](#enabling-and-disabling-package-restore).</span><span class="sxs-lookup"><span data-stu-id="80a58-126">If you see the error "This project references NuGet package(s) that are missing on this computer" or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," turn on automatic restore by following the instructions under [Enabling and disabling package restore](#enabling-and-disabling-package-restore).</span></span> <span data-ttu-id="80a58-127">Zobacz też [Rozwiązywanie problemów z przywracania pakietu](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="80a58-127">Also see [Package restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

- <span data-ttu-id="80a58-128">**Interfejs wiersza polecenia NuGet**: Użyj [Przywracanie pakietów nuget](../tools/cli-ref-restore.md) polecenia, które pakiety wymienione w pliku projektu lub w `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="80a58-128">**NuGet CLI**: use the [nuget restore](../tools/cli-ref-restore.md) command, which restores packages listed in the project file or in `packages.config`.</span></span> <span data-ttu-id="80a58-129">Można również określić plik rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="80a58-129">You can also specify a solution file.</span></span>

- <span data-ttu-id="80a58-130">**Program MSBuild**: Użyj [msbuild - t: Przywracanie](../reference/msbuild-targets.md#restore-target) polecenia, które przywraca pakietów pakiety wymienione w pliku projektu (tylko PackageReference).</span><span class="sxs-lookup"><span data-stu-id="80a58-130">**MSBuild**: use the [msbuild -t:restore](../reference/msbuild-targets.md#restore-target) command, which restores packages packages listed in the project file (PackageReference only).</span></span> <span data-ttu-id="80a58-131">Dostępne tylko w NuGet 4.x+ i MSBuild 15.1 +, które są dołączone do programu Visual Studio 2017 i nowsze wersje.</span><span class="sxs-lookup"><span data-stu-id="80a58-131">Available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017 and higher versions.</span></span> <span data-ttu-id="80a58-132">`nuget restore` i `dotnet restore` dla projektów dotyczy zarówno Użyj tego polecenia.</span><span class="sxs-lookup"><span data-stu-id="80a58-132">`nuget restore` and `dotnet restore` both use this command for applicable projects.</span></span>

- <span data-ttu-id="80a58-133">**Visual Studio Team Services**: Podczas tworzenia definicji kompilacji w usłudze Team Services, obejmują [Przywracanie pakietów NuGet](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) lub [przywracania programu .NET Core](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) zadania w definicji przed dowolnego zadania kompilacji.</span><span class="sxs-lookup"><span data-stu-id="80a58-133">**Visual Studio Team Services**: When creating a build definition on Team Services, include the [NuGet restore](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) or [.NET Core Restore](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) task in the definition before any build task.</span></span> <span data-ttu-id="80a58-134">To zadanie jest domyślnie włączone w wiele szablonów kompilacji.</span><span class="sxs-lookup"><span data-stu-id="80a58-134">This task is included by default in a number of build templates.</span></span>

- <span data-ttu-id="80a58-135">**Team Foundation Server**: TFS 2013 lub nowszym automatycznie przywraca pakietów podczas kompilacji, pod warunkiem, że używasz zespołu tworzenie szablonu dla TFS 2013 lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="80a58-135">**Team Foundation Server**: TFS 2013 and later automatically restores packages during build, provided that you're using a Team Build Template for TFS 2013 or later.</span></span> <span data-ttu-id="80a58-136">Dla wcześniejszych wersji programu TFS można dołączyć kroku kompilacji do wywoływania jednej z powyższych opcji wiersza polecenia restore.</span><span class="sxs-lookup"><span data-stu-id="80a58-136">For earlier version of TFS, you can include a build step to invoke one of the command-line restore options above.</span></span> <span data-ttu-id="80a58-137">Opcjonalnie można migrować szablonu kompilacji do programu TFS 2013.</span><span class="sxs-lookup"><span data-stu-id="80a58-137">You can optionally migrate the build template to TFS 2013.</span></span> <span data-ttu-id="80a58-138">Aby uzyskać więcej informacji, zobacz [wskazówki dotyczące przywracania pakietów w programie Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="80a58-138">For more information, see the [Walkthrough of package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="enabling-and-disabling-package-restore"></a><span data-ttu-id="80a58-139">Włączanie i wyłączanie Przywracanie pakietu</span><span class="sxs-lookup"><span data-stu-id="80a58-139">Enabling and disabling package restore</span></span>

<span data-ttu-id="80a58-140">Przywracanie pakietu przede wszystkim jest włączana za pomocą **Narzędzia > Opcje > Menedżer pakietów NuGet** w programie Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="80a58-140">Package restore is primarily enabled through **Tools > Options > NuGet Package Manager** in Visual Studio:</span></span>

![Kontrolowanie zachowania przywracania pakietów za pomocą opcji Menedżer pakietów NuGet](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="80a58-142">**Zezwalaj na rozszerzenie NuGet, aby pobrać brakujące pakiety**: kontroluje wszystkie formularze Przywracanie pakietu, zmieniając `packageRestore/enabled` w `NuGet.Config` pliku, jak pokazano poniżej (`%AppData%\NuGet\NuGet.Config` na Windows, `~/.nuget/NuGet/NuGet.Config` w systemie Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="80a58-142">**Allow NuGet to download missing packages**: controls all forms of package restore by changing the `packageRestore/enabled` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="80a58-143">W programie Visual Studio, to ustawienie umożliwia **Przywróć pakiety NuGet** polecenia w menu kontekstowym rozwiązania do pracy.</span><span class="sxs-lookup"><span data-stu-id="80a58-143">In Visual Studio, this setting allows the **Restore NuGet Packages** command on the solution's context menu to work.</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-Integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```

> [!Note]
>  <span data-ttu-id="80a58-144">`packageRestore/enabled` Ustawienie można przesłonić globalny, ustawiając zmienną środowiskową o nazwie **EnableNuGetPackageRestore** o wartości TRUE lub FALSE przed uruchomieniem programu Visual Studio lub uruchamianie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="80a58-144">The `packageRestore/enabled` setting can be overridden globally by setting an environment variable called **EnableNuGetPackageRestore** with a value of TRUE or FALSE before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="80a58-145">**Automatyczne sprawdzenie dostępności dla brakujących pakietów podczas kompilacji w programie Visual Studio**: Określa automatycznego przywracania, zmieniając `packageRestore/automatic` w `NuGet.Config` pliku, jak pokazano poniżej (`%AppData%\NuGet\NuGet.Config` na Windows, `~/.nuget/NuGet/NuGet.Config` w systemie Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="80a58-145">**Automatically check for missing packages during build in Visual Studio**: controls automatic restore by changing the `packageRestore/automatic` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="80a58-146">Gdy ta opcja jest ustawiona, uruchamianie kompilacji w programie Visual Studio automatycznie przywraca wszystkie brakujące pakiety.</span><span class="sxs-lookup"><span data-stu-id="80a58-146">When this option is set, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="80a58-147">Opcja nie wpływa na kompilacje uruchamiane z wiersza polecenia, korzystając z programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="80a58-147">The option does not affect builds run from the command line using MSBuild.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="80a58-148">Aby informacje, zobacz [NuGet pliku config - sekcji packageRestore](../reference/nuget-config-file.md#packagerestore-section).</span><span class="sxs-lookup"><span data-stu-id="80a58-148">For reference, see the [NuGet config file - packageRestore section](../reference/nuget-config-file.md#packagerestore-section).</span></span>

<span data-ttu-id="80a58-149">W niektórych przypadkach włączyć lub wyłączyć przywracania pakietu dla wszystkich użytkowników na komputerze może być dewelopera lub firmy.</span><span class="sxs-lookup"><span data-stu-id="80a58-149">In some cases, a developer or company might want to enable or disable package restore for all users on a computer.</span></span> <span data-ttu-id="80a58-150">Aby to zrobić, Dodaj te same ustawienia powyżej do globalnych znajduje się w pliku konfiguracji w NuGet `%ProgramData%\NuGet\Config` (Windows potencjalnie w ramach określonego `\{IDE}\{Version}\{SKU}\` folderu dla programu Visual Studio) lub `~/.local/share` (Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="80a58-150">To do this, add the same settings above to the global NuGet configuration file located in `%ProgramData%\NuGet\Config` (Windows, potentially under a specific `\{IDE}\{Version}\{SKU}\` folder for Visual Studio) or `~/.local/share` (Mac/Linux).</span></span> <span data-ttu-id="80a58-151">Poszczególnych użytkowników można selektywnie włączysz przywracania na poziomie projektu.</span><span class="sxs-lookup"><span data-stu-id="80a58-151">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="80a58-152">Zobacz [NuGet typowe konfiguracje](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) dokładnie szczegółowe informacje na temat sposobu NuGet umożliwia określenie wielu plików konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="80a58-152">See [Common NuGet configurations](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) for exact details on how NuGet prioritizes multiple config files.</span></span>

> [!Important]
> <span data-ttu-id="80a58-153">Jeśli edytujesz `packageRestore` ustawienia bezpośrednio w `nuget.config`, uruchom ponownie program Visual Studio, okno dialogowe Opcje Pokazuje bieżące wartości.</span><span class="sxs-lookup"><span data-stu-id="80a58-153">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio so that the options dialog box shows the current values.</span></span>

## <a name="constraining-package-versions-with-restore"></a><span data-ttu-id="80a58-154">Ograniczający wersji pakietu, dzięki funkcji przywracania</span><span class="sxs-lookup"><span data-stu-id="80a58-154">Constraining package versions with restore</span></span>

<span data-ttu-id="80a58-155">Podczas przywracania pakietów przy użyciu dowolnej metody, NuGet honoruje wszelkie ograniczenia określone w `packages.config` lub pliku projektu:</span><span class="sxs-lookup"><span data-stu-id="80a58-155">When restoring packages through any method, NuGet honors any constraints specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="80a58-156">`packages.config`: Określ zakres wersji w `allowedVersion` właściwość zależności.</span><span class="sxs-lookup"><span data-stu-id="80a58-156">`packages.config`: Specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="80a58-157">Zobacz [ponowne zainstalowanie i aktualizowanie pakietów](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span><span class="sxs-lookup"><span data-stu-id="80a58-157">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span></span> <span data-ttu-id="80a58-158">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="80a58-158">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="80a58-159">Plik projektu (PackageReference): Określ zakres wersji bezpośrednio z numerem wersji zależności.</span><span class="sxs-lookup"><span data-stu-id="80a58-159">Project file (PackageReference): Specify a version range directly with the dependency's version number.</span></span> <span data-ttu-id="80a58-160">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="80a58-160">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="80a58-161">We wszystkich przypadkach Notacja opisanego w [przechowywanie wersji pakietów](../reference/package-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="80a58-161">In all cases, use the notation described in [Package versioning](../reference/package-versioning.md).</span></span>

## <a name="forcing-restore-from-package-sources"></a><span data-ttu-id="80a58-162">Wymuszanie przywracanie ze źródła pakietu</span><span class="sxs-lookup"><span data-stu-id="80a58-162">Forcing restore from package sources</span></span>

<span data-ttu-id="80a58-163">Domyślnie operacje przywracania NuGet używania pakietów *globalnymi pakietami* i *pamięci podręcznej http* foldery, które są opisane na [Zarządzanie globalnymi pakietami i folderami pamięci podręcznej](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="80a58-163">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="80a58-164">Aby uniknąć używania *globalnymi pakietami* folder, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="80a58-164">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="80a58-165">Wyczyść folderze przy użyciu `nuget locals global-packages -clear` lub `dotnet nuget locals global-packages --clear`</span><span class="sxs-lookup"><span data-stu-id="80a58-165">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`</span></span>
- <span data-ttu-id="80a58-166">Tymczasowo zmienić lokalizację *globalnymi pakietami* folder przed rozpoczęciem operacji przywracania przy użyciu jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="80a58-166">Temporarily change the location of the *global-packages* folder before the restore operation using one of the following methods:</span></span>
  - <span data-ttu-id="80a58-167">Ustaw zmienną środowiskową NUGET_PACKAGES do innego folderu.</span><span class="sxs-lookup"><span data-stu-id="80a58-167">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="80a58-168">Tworzenie `NuGet.Config` pliku, który ustawia `globalPackagesFolder` (w przypadku korzystania z funkcji PackageReference) lub `repositoryPath` (Jeśli za pomocą `packages.config`) do innego folderu (zobacz [ustawień konfiguracji](../reference/nuget-config-file.md#config-section)</span><span class="sxs-lookup"><span data-stu-id="80a58-168">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder (see [configuration settings](../reference/nuget-config-file.md#config-section)</span></span>
  - <span data-ttu-id="80a58-169">Tylko MSBuild: określić inny folder z `RestorePackagesPath` właściwości.</span><span class="sxs-lookup"><span data-stu-id="80a58-169">MSBuild only: specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="80a58-170">Aby uniknąć, za pomocą pamięci podręcznej dla źródła HTTP, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="80a58-170">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="80a58-171">Użyj `-NoCache` z opcją `nuget restore` lub `--no-cache` z opcją `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="80a58-171">Use the `-NoCache` option with `nuget restore` or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="80a58-172">Te opcje nie wpływają na operacje przywracania za pomocą programu Visual Studio interfejs użytkownika Menedżera pakietów lub konsoli.</span><span class="sxs-lookup"><span data-stu-id="80a58-172">These options do not affect restore operations through the Visual Studio Package Manager UI or Console.</span></span>
- <span data-ttu-id="80a58-173">Wyczyść pamięć podręczną za pomocą `nuget locals http-cache -clear` lub `dotnet nuget locals http-cache --clear`.</span><span class="sxs-lookup"><span data-stu-id="80a58-173">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="80a58-174">Tymczasowe ustawienie zmiennej środowiskowej NUGET_HTTP_CACHE_PATH do innego folderu.</span><span class="sxs-lookup"><span data-stu-id="80a58-174">Temporarily set of the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="80a58-175">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="80a58-175">Troubleshooting</span></span>

<span data-ttu-id="80a58-176">Zobacz [Rozwiązywanie problemów z Przywracanie pakietu](package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="80a58-176">See [Troubleshooting package restore](package-restore-troubleshooting.md).</span></span>
