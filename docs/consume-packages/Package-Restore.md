---
title: Przywracanie pakietów NuGet
description: Omówienie sposobu przywracania pakietów NuGet przez projekt, w tym sposobu wyłączania przywracania i ograniczania wersji.
author: JonDouglas
ms.author: jodou
ms.date: 08/05/2019
ms.topic: conceptual
ms.openlocfilehash: 6cdc826c85f233c7108a53ad244aa8c47df0be67
ms.sourcegitcommit: 40c039ace0330dd9e68922882017f9878f4283d1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/22/2021
ms.locfileid: "107901840"
---
# <a name="restore-packages-using-package-restore"></a><span data-ttu-id="922c1-103">Przywracanie pakietów przy użyciu funkcji przywracania pakietów</span><span class="sxs-lookup"><span data-stu-id="922c1-103">Restore packages using Package Restore</span></span>

<span data-ttu-id="922c1-104">Aby promować czyste środowisko projektowe i zmniejszyć rozmiar repozytorium, przywracanie pakietów **NuGet** instaluje wszystkie zależności projektu wymienione w pliku projektu lub `packages.config` .</span><span class="sxs-lookup"><span data-stu-id="922c1-104">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all of a project's dependencies listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="922c1-105">Polecenia .NET Core 2.0+ `dotnet build` i `dotnet run` wykonają automatyczne przywracanie pakietów.</span><span class="sxs-lookup"><span data-stu-id="922c1-105">The .NET Core 2.0+ `dotnet build` and `dotnet run` commands do an automatic package restore.</span></span> <span data-ttu-id="922c1-106">Visual Studio automatycznie przywracać pakiety podczas kompilowania projektu, a pakiety można przywrócić w dowolnym momencie za pomocą programu Visual Studio, , i xbuild w `nuget restore` `dotnet restore` programie Mono.</span><span class="sxs-lookup"><span data-stu-id="922c1-106">Visual Studio can restore packages automatically when it builds a project, and you can restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="922c1-107">Przywracanie pakietów zapewnia, że wszystkie zależności projektu są dostępne bez konieczności przechowywania ich w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="922c1-107">Package Restore makes sure that all a project's dependencies are available, without having to store them in source control.</span></span> <span data-ttu-id="922c1-108">Aby skonfigurować repozytorium kontroli źródła w celu wykluczenia plików binarnych pakietu, zobacz [Pakiety i kontrola źródła](../consume-packages/packages-and-source-control.md).</span><span class="sxs-lookup"><span data-stu-id="922c1-108">To configure your source control repository to exclude the package binaries, see [Packages and source control](../consume-packages/packages-and-source-control.md).</span></span> 

## <a name="package-restore-overview"></a><span data-ttu-id="922c1-109">Omówienie przywracania pakietów</span><span class="sxs-lookup"><span data-stu-id="922c1-109">Package Restore overview</span></span>

<span data-ttu-id="922c1-110">Przywracanie pakietów najpierw instaluje bezpośrednie zależności projektu zgodnie z potrzebami, a następnie instaluje wszelkie zależności tych pakietów w całym grafie zależności.</span><span class="sxs-lookup"><span data-stu-id="922c1-110">Package Restore first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="922c1-111">Jeśli pakiet nie został jeszcze zainstalowany, pakiet NuGet najpierw próbuje pobrać go z pamięci [podręcznej](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="922c1-111">If a package isn't already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="922c1-112">Jeśli pakiet nie znajduje się w pamięci podręcznej, narzędzie NuGet spróbuje pobrać pakiet ze wszystkich włączonych źródeł na liście w menu Narzędzia Opcje NuGet Menedżer pakietów źródeł pakietów w  >    >    >   programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="922c1-112">If the package isn't in the cache, NuGet tries to download the package from all enabled sources in the list at **Tools** > **Options** > **NuGet Package Manager** > **Package Sources** in Visual Studio.</span></span> <span data-ttu-id="922c1-113">Podczas przywracania program NuGet ignoruje kolejność źródeł pakietów i używa pakietu z tego, które źródło odpowiada najpierw na żądania.</span><span class="sxs-lookup"><span data-stu-id="922c1-113">During restore, NuGet ignores the order of package sources, and uses the package from whichever source is first to respond to requests.</span></span> <span data-ttu-id="922c1-114">Aby uzyskać więcej informacji na temat zachowania rozwiązania NuGet, zobacz [Typowe konfiguracje NuGet](Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="922c1-114">For more information about how NuGet behaves, see [Common NuGet configurations](Configuring-NuGet-Behavior.md).</span></span> 

> [!Note]
> <span data-ttu-id="922c1-115">NuGet nie wskazuje błędu przywracania pakietu, dopóki wszystkie źródła nie zostaną sprawdzone.</span><span class="sxs-lookup"><span data-stu-id="922c1-115">NuGet doesn't indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="922c1-116">W tym czasie program NuGet zgłasza błąd tylko dla ostatniego źródła na liście.</span><span class="sxs-lookup"><span data-stu-id="922c1-116">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="922c1-117">Ten błąd oznacza, że pakiet  nie był obecny w żadnym z innych źródeł, mimo że błędy nie są wyświetlane osobno dla każdego z tych źródeł.</span><span class="sxs-lookup"><span data-stu-id="922c1-117">The error implies that the package wasn't present on *any* of the other sources, even though errors aren't shown for each of those sources individually.</span></span>

## <a name="restore-packages"></a><span data-ttu-id="922c1-118">Przywracanie pakietów</span><span class="sxs-lookup"><span data-stu-id="922c1-118">Restore packages</span></span>

<span data-ttu-id="922c1-119">Przywracanie pakietu próbuje zainstalować wszystkie zależności pakietu do prawidłowego stanu zgodnego z odwołaniami do pakietu w pliku projektu *(csproj)* lub w *packages.config* pliku.</span><span class="sxs-lookup"><span data-stu-id="922c1-119">Package Restore tries to install all package dependencies to the correct state matching the package references in your project file (*.csproj*) or your *packages.config* file.</span></span> <span data-ttu-id="922c1-120">(W Visual Studio odwołania są wyświetlane w Eksplorator rozwiązań w obszarze **Zależności \ NuGet** lub w **węźle Odwołania).**</span><span class="sxs-lookup"><span data-stu-id="922c1-120">(In Visual Studio, the references appear in Solution Explorer under the **Dependencies \ NuGet** or the **References** node.)</span></span>

1. <span data-ttu-id="922c1-121">Jeśli odwołania do pakietu w pliku projektu są poprawne, użyj preferowanego narzędzia do przywracania pakietów.</span><span class="sxs-lookup"><span data-stu-id="922c1-121">If the package references in your project file are correct, use your preferred tool to restore packages.</span></span>

   - <span data-ttu-id="922c1-122">[Visual Studio](#restore-using-visual-studio) [(przywracanie automatyczne lub](#restore-packages-automatically-using-visual-studio) przywracanie [ręczne)](#restore-packages-manually-using-visual-studio)</span><span class="sxs-lookup"><span data-stu-id="922c1-122">[Visual Studio](#restore-using-visual-studio) ([automatic restore](#restore-packages-automatically-using-visual-studio) or [manual restore](#restore-packages-manually-using-visual-studio))</span></span>
   - [<span data-ttu-id="922c1-123">Interfejs wiersza polecenia dotnet</span><span class="sxs-lookup"><span data-stu-id="922c1-123">dotnet CLI</span></span>](#restore-using-the-dotnet-cli)
   - [<span data-ttu-id="922c1-124">Interfejs wiersza polecenia nuget.exe</span><span class="sxs-lookup"><span data-stu-id="922c1-124">nuget.exe CLI</span></span>](#restore-using-the-nugetexe-cli)
   - [<span data-ttu-id="922c1-125">MSBuild</span><span class="sxs-lookup"><span data-stu-id="922c1-125">MSBuild</span></span>](#restore-using-msbuild)
   - [<span data-ttu-id="922c1-126">Azure Pipelines</span><span class="sxs-lookup"><span data-stu-id="922c1-126">Azure Pipelines</span></span>](#restore-using-azure-pipelines)
   - [<span data-ttu-id="922c1-127">Azure DevOps Server</span><span class="sxs-lookup"><span data-stu-id="922c1-127">Azure DevOps Server</span></span>](#restore-using-azure-devops-server)

   <span data-ttu-id="922c1-128">Jeśli odwołania do pakietu w pliku projektu *(csproj)* lub w plikupackages.configsą nieprawidłowe (nie są zgodne z żądanym stanem po przywróceniu pakietu), zamiast *tego* należy zainstalować lub zaktualizować pakiety.</span><span class="sxs-lookup"><span data-stu-id="922c1-128">If the package references in your project file (*.csproj*) or your *packages.config* file are incorrect (they do not match your desired state following Package Restore), then you need to either install or update packages instead.</span></span>

   <span data-ttu-id="922c1-129">W przypadku projektów korzystających z packageReference po pomyślnym przywróceniu pakiet powinien być obecny w folderze *global-packages,* a `obj/project.assets.json` plik zostanie ponownie utworzony.</span><span class="sxs-lookup"><span data-stu-id="922c1-129">For projects using PackageReference, after a successful restore, the package should be present in the *global-packages* folder and the `obj/project.assets.json` file is recreated.</span></span> <span data-ttu-id="922c1-130">W przypadku `packages.config` projektów korzystających z programu pakiet powinien pojawić się w `packages` folderze projektu.</span><span class="sxs-lookup"><span data-stu-id="922c1-130">For projects using `packages.config`, the package should appear in the project's `packages` folder.</span></span> <span data-ttu-id="922c1-131">Projekt powinien teraz zostać pomyślnie skompilowany.</span><span class="sxs-lookup"><span data-stu-id="922c1-131">The project should now build successfully.</span></span> 

2. <span data-ttu-id="922c1-132">Po uruchomieniu przywracania pakietu, jeśli nadal występują brakujące pakiety lub błędy związane z pakietem (takie jak ikony błędów w programie Eksplorator rozwiązań w programie Visual Studio), może być konieczne postępuj zgodnie z instrukcjami opisanymi w części [Rozwiązywanie](package-restore-troubleshooting.md) problemów z błędami przywracania pakietów lub, alternatywnie, ponowne instalowanie i [aktualizowanie pakietów](../consume-packages/reinstalling-and-updating-packages.md).</span><span class="sxs-lookup"><span data-stu-id="922c1-132">After running Package Restore, if you still experience missing packages or package-related errors (such as error icons in Solution Explorer in Visual Studio), you may need to follow instructions described in [Troubleshooting Package Restore errors](package-restore-troubleshooting.md) or, alternatively, [reinstall and update packages](../consume-packages/reinstalling-and-updating-packages.md).</span></span>

   <span data-ttu-id="922c1-133">W Visual Studio konsoli Menedżer pakietów udostępnia kilka elastycznych opcji ponownego instalowania pakietów.</span><span class="sxs-lookup"><span data-stu-id="922c1-133">In Visual Studio, the Package Manager Console provides several flexible options for reinstalling packages.</span></span> <span data-ttu-id="922c1-134">Zobacz [Using Package-Update (Korzystanie z aktualizacji pakietu).](reinstalling-and-updating-packages.md#using-update-package)</span><span class="sxs-lookup"><span data-stu-id="922c1-134">See [Using Package-Update](reinstalling-and-updating-packages.md#using-update-package).</span></span>

## <a name="restore-using-visual-studio"></a><span data-ttu-id="922c1-135">Przywracanie przy użyciu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="922c1-135">Restore using Visual Studio</span></span>

<span data-ttu-id="922c1-136">W Visual Studio w systemie Windows:</span><span class="sxs-lookup"><span data-stu-id="922c1-136">In Visual Studio on Windows, either:</span></span>

- <span data-ttu-id="922c1-137">Automatyczne przywracanie pakietów lub</span><span class="sxs-lookup"><span data-stu-id="922c1-137">Restore packages automatically, or</span></span>

- <span data-ttu-id="922c1-138">Ręczne przywracanie pakietów</span><span class="sxs-lookup"><span data-stu-id="922c1-138">Restore packages manually</span></span>

### <a name="restore-packages-automatically-using-visual-studio"></a><span data-ttu-id="922c1-139">Automatyczne przywracanie pakietów przy użyciu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="922c1-139">Restore packages automatically using Visual Studio</span></span>

<span data-ttu-id="922c1-140">Przywracanie pakietu odbywa się automatycznie podczas tworzenia projektu na podstawie szablonu lub kompilowania projektu, z zastrzeżeniem opcji dostępnych w temacie Włączanie i [wyłączanie przywracania pakietu.](#enable-and-disable-package-restore-in-visual-studio)</span><span class="sxs-lookup"><span data-stu-id="922c1-140">Package Restore happens automatically when you create a project from a template or build a project, subject to the options in [Enable and disable package restore](#enable-and-disable-package-restore-in-visual-studio).</span></span> <span data-ttu-id="922c1-141">W programie NuGet 4.0+ przywracanie odbywa się również automatycznie w przypadku zmiany projektu w stylu zestawu SDK (zazwyczaj jest to projekt platformy .NET Core .NET Standard).</span><span class="sxs-lookup"><span data-stu-id="922c1-141">In NuGet 4.0+, restore also happens automatically when you make changes to a SDK-style project (typically a .NET Core or .NET Standard project).</span></span>

1. <span data-ttu-id="922c1-142">Włącz automatyczne przywracanie pakietów, wybierając pozycję Opcje narzędzi NuGet Menedżer pakietów , a następnie wybierając pozycję Automatycznie sprawdzaj brakujące pakiety podczas kompilacji w  >    >   **programie Visual Studio** **obszarze Przywracanie pakietów.**</span><span class="sxs-lookup"><span data-stu-id="922c1-142">Enable automatic package restore by choosing **Tools** > **Options** > **NuGet Package Manager**, and then selecting **Automatically check for missing packages during build in Visual Studio** under **Package Restore**.</span></span>

   <span data-ttu-id="922c1-143">W przypadku projektów innych niż w stylu zestawu SDK należy najpierw wybrać pozycję Zezwalaj pakietowi **NuGet na** pobieranie brakujących pakietów, aby włączyć opcję automatycznego przywracania.</span><span class="sxs-lookup"><span data-stu-id="922c1-143">For non-SDK-style projects, you first need to select **Allow NuGet to download missing packages** to enable the automatic restore option.</span></span>

1. <span data-ttu-id="922c1-144">Skompiluj projekt.</span><span class="sxs-lookup"><span data-stu-id="922c1-144">Build the project.</span></span>

   <span data-ttu-id="922c1-145">Jeśli co najmniej jeden indywidualny pakiet nadal nie został poprawnie **zainstalowany,** Eksplorator rozwiązań ikona błędu.</span><span class="sxs-lookup"><span data-stu-id="922c1-145">If one or more individual packages still aren't installed properly, **Solution Explorer** shows an error icon.</span></span> <span data-ttu-id="922c1-146">Kliknij prawym przyciskiem myszy i wybierz  polecenie **Zarządzaj pakietami NuGet,** a następnie użyj Menedżer pakietów, aby odinstalować i ponownie zainstalować odpowiednie pakiety.</span><span class="sxs-lookup"><span data-stu-id="922c1-146">Right-click and select **Manage NuGet Packages**, and use **Package Manager** to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="922c1-147">Aby uzyskać więcej informacji, zobacz [Ponowne instalowanie i aktualizowanie pakietów](../consume-packages/reinstalling-and-updating-packages.md)</span><span class="sxs-lookup"><span data-stu-id="922c1-147">For more information, see [Reinstall and update packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

   <span data-ttu-id="922c1-148">Jeśli zostanie wyświetlony błąd "Ten projekt odwołuje się do pakietów NuGet, których brakuje na tym komputerze", lub "Co najmniej jeden pakiet NuGet musi zostać przywrócony, ale nie można tego zrobić, ponieważ nie udzielono [zgody",](#enable-and-disable-package-restore-in-visual-studio)włącz automatyczne przywracanie .</span><span class="sxs-lookup"><span data-stu-id="922c1-148">If you see the error "This project references NuGet package(s) that are missing on this computer," or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," [enable automatic restore](#enable-and-disable-package-restore-in-visual-studio).</span></span> <span data-ttu-id="922c1-149">W przypadku starszych projektów zobacz również [Migrowanie do automatycznego przywracania pakietów.](#migrate-to-automatic-package-restore-visual-studio)</span><span class="sxs-lookup"><span data-stu-id="922c1-149">For older projects, also see [Migrate to automatic package restore](#migrate-to-automatic-package-restore-visual-studio).</span></span> <span data-ttu-id="922c1-150">Zobacz też rozwiązywanie [problemów z przywracaniem pakietów.](Package-restore-troubleshooting.md)</span><span class="sxs-lookup"><span data-stu-id="922c1-150">Also see [Package Restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

### <a name="restore-packages-manually-using-visual-studio"></a><span data-ttu-id="922c1-151">Przywróć pakiety ręcznie przy użyciu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="922c1-151">Restore packages manually using Visual Studio</span></span>

1. <span data-ttu-id="922c1-152">Włącz przywracanie pakietów, wybierając **opcje**  >  **narzędzi**  >  **NuGet Menedżer pakietów**.</span><span class="sxs-lookup"><span data-stu-id="922c1-152">Enable package restore by choosing **Tools** > **Options** > **NuGet Package Manager**.</span></span> <span data-ttu-id="922c1-153">W **obszarze Opcje przywracania** pakietów wybierz pozycję **Zezwalaj programowi NuGet na pobieranie brakujących pakietów.**</span><span class="sxs-lookup"><span data-stu-id="922c1-153">Under **Package Restore** options, select **Allow NuGet to download missing packages**.</span></span>

1. <span data-ttu-id="922c1-154">W **Eksplorator rozwiązań** kliknij rozwiązanie prawym przyciskiem myszy i wybierz polecenie **Przywróć pakiety NuGet.**</span><span class="sxs-lookup"><span data-stu-id="922c1-154">In **Solution Explorer**, right click the solution and select **Restore NuGet Packages**.</span></span>

   <span data-ttu-id="922c1-155">Jeśli co najmniej jeden indywidualny pakiet nadal nie został poprawnie **zainstalowany,** Eksplorator rozwiązań ikona błędu.</span><span class="sxs-lookup"><span data-stu-id="922c1-155">If one or more individual packages still aren't installed properly, **Solution Explorer** shows an error icon.</span></span> <span data-ttu-id="922c1-156">Kliknij prawym przyciskiem myszy i wybierz polecenie  Zarządzaj **pakietami NuGet,** a następnie użyj Menedżer pakietów, aby odinstalować i ponownie zainstalować odpowiednie pakiety.</span><span class="sxs-lookup"><span data-stu-id="922c1-156">Right-click and select **Manage NuGet Packages**, and then use **Package Manager** to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="922c1-157">Aby uzyskać więcej informacji, zobacz [Ponowne instalowanie i aktualizowanie pakietów](../consume-packages/reinstalling-and-updating-packages.md)</span><span class="sxs-lookup"><span data-stu-id="922c1-157">For more information, see [Reinstall and update packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

   <span data-ttu-id="922c1-158">Jeśli zostanie wyświetlony błąd "Ten projekt odwołuje się do pakietów NuGet, których brakuje na tym komputerze", lub "Co najmniej jeden pakiet NuGet musi zostać przywrócony, ale nie można tego zrobić, ponieważ nie udzielono [zgody",](#enable-and-disable-package-restore-in-visual-studio)włącz automatyczne przywracanie .</span><span class="sxs-lookup"><span data-stu-id="922c1-158">If you see the error "This project references NuGet package(s) that are missing on this computer," or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," [enable automatic restore](#enable-and-disable-package-restore-in-visual-studio).</span></span> <span data-ttu-id="922c1-159">W przypadku starszych projektów zobacz również [Migrowanie do automatycznego przywracania pakietów.](#migrate-to-automatic-package-restore-visual-studio)</span><span class="sxs-lookup"><span data-stu-id="922c1-159">For older projects, also see [Migrate to automatic package restore](#migrate-to-automatic-package-restore-visual-studio).</span></span> <span data-ttu-id="922c1-160">Zobacz też rozwiązywanie [problemów z przywracaniem pakietów.](Package-restore-troubleshooting.md)</span><span class="sxs-lookup"><span data-stu-id="922c1-160">Also see [Package Restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

### <a name="enable-and-disable-package-restore-in-visual-studio"></a><span data-ttu-id="922c1-161">Włączanie i wyłączanie przywracania pakietów w Visual Studio</span><span class="sxs-lookup"><span data-stu-id="922c1-161">Enable and disable package restore in Visual Studio</span></span>

<span data-ttu-id="922c1-162">W Visual Studio można kontrolować przywracanie pakietów przede wszystkim za pomocą **opcji**  >  **narzędzi**  >  **NuGet Menedżer pakietów**:</span><span class="sxs-lookup"><span data-stu-id="922c1-162">In Visual Studio, you control Package Restore primarily through **Tools** > **Options** > **NuGet Package Manager**:</span></span>

![Kontrolowanie przywracania pakietów za pomocą Menedżer pakietów NuGet](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="922c1-164">**Ustawienie Zezwalaj** programowi NuGet na pobieranie brakujących pakietów steruje wszystkimi formami przywracania pakietów przez zmianę ustawienia w sekcji packageRestore pliku w systemie Windows lub w systemie `packageRestore/enabled` [](../reference/nuget-config-file.md#packagerestore-section) `NuGet.Config` `%AppData%\NuGet\` `~/.nuget/NuGet/` Mac/Linux.</span><span class="sxs-lookup"><span data-stu-id="922c1-164">**Allow NuGet to download missing packages** controls all forms of package restore by changing the `packageRestore/enabled` setting in the [packageRestore section](../reference/nuget-config-file.md#packagerestore-section) of the `NuGet.Config` file, at `%AppData%\NuGet\` on Windows, or `~/.nuget/NuGet/` on Mac/Linux.</span></span> <span data-ttu-id="922c1-165">To ustawienie włącza również **polecenie Przywróć** pakiety NuGet w menu kontekstowym rozwiązania w Visual Studio, .</span><span class="sxs-lookup"><span data-stu-id="922c1-165">This setting also enables the **Restore NuGet Packages** command on the solution's context menu in Visual Studio, .</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```
    
  > [!Note]
  > <span data-ttu-id="922c1-166">Aby globalnie zastąpić to ustawienie, ustaw zmienną środowiskową `packageRestore/enabled` **EnableNuGetPackageRestore** na wartość True lub False przed uruchomieniem Visual Studio lub uruchomieniem kompilacji.</span><span class="sxs-lookup"><span data-stu-id="922c1-166">To globally override the `packageRestore/enabled` setting, set the environment variable **EnableNuGetPackageRestore** with a value of True or False before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="922c1-167">**Automatycznie sprawdzaj brakujące pakiety podczas** kompilacji w programie Visual Studio automatycznie przywracać, zmieniając ustawienie w sekcji `packageRestore/automatic` [packageRestore](../reference/nuget-config-file.md#packagerestore-section) `NuGet.Config` pliku.</span><span class="sxs-lookup"><span data-stu-id="922c1-167">**Automatically check for missing packages during build in Visual Studio** controls automatic restore by changing the `packageRestore/automatic` setting in the [packageRestore section](../reference/nuget-config-file.md#packagerestore-section) of the `NuGet.Config` file.</span></span> <span data-ttu-id="922c1-168">Jeśli ta opcja jest ustawiona na wartość True, uruchomienie kompilacji z Visual Studio automatycznie przywraca wszystkie brakujące pakiety.</span><span class="sxs-lookup"><span data-stu-id="922c1-168">When this option is set to True, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="922c1-169">To ustawienie nie ma wpływu na kompilacje uruchamiane z wiersza polecenia programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="922c1-169">This setting doesn't affect builds run from the MSBuild command line.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="922c1-170">Aby włączyć lub wyłączyć przywracanie pakietów dla wszystkich użytkowników na komputerze, deweloper lub firma może dodać ustawienia konfiguracji do pliku `nuget.config` globalnego.</span><span class="sxs-lookup"><span data-stu-id="922c1-170">To enable or disable Package Restore for all users on a computer, a developer or company can add the configuration settings to the global `nuget.config` file.</span></span> <span data-ttu-id="922c1-171">Globalna jest w systemie Windows w systemie , czasami w określonym Visual Studio folderze lub w `nuget.config` `%ProgramData%\NuGet\Config` systemie `\{IDE}\{Version}\{SKU}\` Mac/Linux w folderze `~/.local/share` .</span><span class="sxs-lookup"><span data-stu-id="922c1-171">The global `nuget.config` is in Windows at `%ProgramData%\NuGet\Config`, sometimes under a specific `\{IDE}\{Version}\{SKU}\` Visual Studio folder, or in Mac/Linux at `~/.local/share`.</span></span> <span data-ttu-id="922c1-172">Poszczegórni użytkownicy mogą następnie selektywnie włączyć przywracanie zgodnie z potrzebami na poziomie projektu.</span><span class="sxs-lookup"><span data-stu-id="922c1-172">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="922c1-173">Aby uzyskać więcej informacji na temat sposobu, w jaki nuGet określa priorytety dla wielu plików konfiguracji, zobacz [Typowe konfiguracje NuGet.](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied)</span><span class="sxs-lookup"><span data-stu-id="922c1-173">For more details on how NuGet prioritizes multiple config files, see [Common NuGet configurations](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span></span>

> [!Important]
> <span data-ttu-id="922c1-174">Jeśli edytujesz ustawienia bezpośrednio w programie , uruchom Visual Studio, aby w oknie dialogowym Opcje `packageRestore` `nuget.config` wyświetlane są bieżące wartości. </span><span class="sxs-lookup"><span data-stu-id="922c1-174">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio, so that the **Options** dialog box shows the current values.</span></span>

### <a name="choose-default-package-management-format"></a><span data-ttu-id="922c1-175">Wybieranie domyślnego formatu zarządzania pakietami</span><span class="sxs-lookup"><span data-stu-id="922c1-175">Choose default package management format</span></span>

![Kontrolowanie domyślnego formatu zarządzania pakietami za pomocą opcji Menedżer pakietów NuGet](media/Restore-02-PackageFormatOptions.png)

<span data-ttu-id="922c1-177">NuGet ma dwa formaty, w których projekt może używać pakietów: [`PackageReference`](package-references-in-project-files.md) i [`packages.config`](../reference/packages-config.md) .</span><span class="sxs-lookup"><span data-stu-id="922c1-177">NuGet has two formats in which a project may use packages: [`PackageReference`](package-references-in-project-files.md) and [`packages.config`](../reference/packages-config.md).</span></span> <span data-ttu-id="922c1-178">Domyślny format można wybrać z listy rozwijanej w obszarze **Zarządzanie pakietami** nagłówka.</span><span class="sxs-lookup"><span data-stu-id="922c1-178">The default format can be selected from the drop-down under the **Package Management** heading.</span></span> <span data-ttu-id="922c1-179">Dostępna jest również opcja monitowania o pierwszy pakiet zainstalowany w projekcie.</span><span class="sxs-lookup"><span data-stu-id="922c1-179">An option to be prompted when the first package is installed in a project is also available.</span></span>

> [!Note]
> <span data-ttu-id="922c1-180">Jeśli projekt nie obsługuje obu formatów zarządzania pakietami, używany format zarządzania pakietami będzie formatem zgodnym z projektem i w związku z tym może nie być domyślnym ustawieniem w opcjach.</span><span class="sxs-lookup"><span data-stu-id="922c1-180">If a project does not support both package management formats, the package management format used will be the one that's compatible with the project, and therefore may not be the default set in the options.</span></span> <span data-ttu-id="922c1-181">Ponadto program NuGet nie będzie monitować o wybór podczas pierwszej instalacji pakietu, nawet jeśli opcja jest zaznaczona w oknie opcji.</span><span class="sxs-lookup"><span data-stu-id="922c1-181">Additionally, NuGet will not prompt for selection on first package installation, even if the option is selected in the options window.</span></span>
>
> <span data-ttu-id="922c1-182">Jeśli Menedżer pakietów do zainstalowania pierwszego pakietu w projekcie, program NuGet nie będzie monitować o wybór formatu, nawet jeśli opcja zostanie wybrana w oknie opcji.</span><span class="sxs-lookup"><span data-stu-id="922c1-182">If Package Manager Console is used to install the first package in a project, NuGet will not prompt for format selection, even if the option is selected in the options window.</span></span>

## <a name="restore-using-the-dotnet-cli"></a><span data-ttu-id="922c1-183">Przywracanie przy użyciu interfejsu wiersza polecenia dotnet</span><span class="sxs-lookup"><span data-stu-id="922c1-183">Restore using the dotnet CLI</span></span>

[!INCLUDE [restore-dotnet-cli](includes/restore-dotnet-cli.md)]

> [!IMPORTANT]
> <span data-ttu-id="922c1-184">Aby dodać brakujące odwołanie do pakietu do pliku projektu, użyj [polecenia dotnet add package](/dotnet/core/tools/dotnet-add-package?tabs=netcore2x), które również uruchamia polecenie `restore` .</span><span class="sxs-lookup"><span data-stu-id="922c1-184">To add a missing package reference to the project file, use [dotnet add package](/dotnet/core/tools/dotnet-add-package?tabs=netcore2x), which also runs the `restore` command.</span></span>

## <a name="restore-using-the-nugetexe-cli"></a><span data-ttu-id="922c1-185">Przywracanie przy użyciu interfejsu wiersza nuget.exe interfejsu wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="922c1-185">Restore using the nuget.exe CLI</span></span>

[!INCLUDE [restore-nuget-exe-cli](includes/restore-nuget-exe-cli.md)]

> [!IMPORTANT]
> <span data-ttu-id="922c1-186">Polecenie `restore` nie modyfikuje pliku projektu ani pliku *packages.config*. Aby dodać zależność, dodaj pakiet za pośrednictwem interfejsu użytkownika Menedżer pakietów lub  konsoli w programie Visual Studio lub zmodyfikujpackages.config, a następnie uruchom `install` lub `restore` .</span><span class="sxs-lookup"><span data-stu-id="922c1-186">The `restore` command does not modify a project file or *packages.config*. To add a dependency, either add a package through the Package Manager UI or Console in Visual Studio, or modify *packages.config* and then run either `install` or `restore`.</span></span>

## <a name="restore-using-msbuild"></a><span data-ttu-id="922c1-187">Przywracanie przy użyciu programu MSBuild</span><span class="sxs-lookup"><span data-stu-id="922c1-187">Restore using MSBuild</span></span>

<span data-ttu-id="922c1-188">Użyj polecenia [msbuild -t:restore,](../reference/msbuild-targets.md#restore-target) aby przywrócić pakiety wymienione w pliku projektu (zobacz [PackageReference](package-references-in-project-files.md)) i począwszy od projektów MSBuild 16.5+. `packages.config`</span><span class="sxs-lookup"><span data-stu-id="922c1-188">Use the [msbuild -t:restore](../reference/msbuild-targets.md#restore-target) command to restore packages listed in the project file (see [PackageReference](package-references-in-project-files.md)) and starting with MSBuild 16.5+, `packages.config` projects.</span></span>

 <span data-ttu-id="922c1-189">To polecenie jest dostępne tylko w programach NuGet 4.x+ i MSBuild 15.1+, które są dostępne w wersji Visual Studio 2017 i wyższych.</span><span class="sxs-lookup"><span data-stu-id="922c1-189">This command is available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017 and higher versions.</span></span>
<span data-ttu-id="922c1-190">Począwszy od programu MSBuild 16.5+, to polecenie może również przywracać oparte na `packages.config` projektach po uruchomieniu polecenia z poleceniem `-p:RestorePackagesConfig=true` .</span><span class="sxs-lookup"><span data-stu-id="922c1-190">Starting with MSBuild 16.5+, this command can also restore `packages.config` based projects when run with `-p:RestorePackagesConfig=true`.</span></span>

1. <span data-ttu-id="922c1-191">Otwórz wiersz polecenia dewelopera (w **polu Wyszukaj** wpisz wiersz **polecenia dewelopera**).</span><span class="sxs-lookup"><span data-stu-id="922c1-191">Open a Developer command prompt (In the **Search** box, type **Developer command prompt**).</span></span>

   <span data-ttu-id="922c1-192">Zazwyczaj chcesz uruchomić aplikację dla programu wiersz polecenia dla deweloperów Visual Studio menu **Start,** ponieważ zostanie ona skonfigurowana ze wszystkimi niezbędnymi ścieżkami dla programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="922c1-192">You typically want to start the Developer Command Prompt for Visual Studio from the **Start** menu, as it will be configured with all the necessary paths for MSBuild.</span></span>

2. <span data-ttu-id="922c1-193">Przejdź do folderu zawierającego plik projektu i wpisz następujące polecenie.</span><span class="sxs-lookup"><span data-stu-id="922c1-193">Switch to the folder containing the project file and type the following command.</span></span>

   ```cmd
   # Uses the project file in the current folder by default
   msbuild -t:restore
   ```

3. <span data-ttu-id="922c1-194">Wpisz następujące polecenie, aby ponownie skompilować projekt.</span><span class="sxs-lookup"><span data-stu-id="922c1-194">Type the following command to rebuild the project.</span></span>

   ```cmd
   msbuild
   ```

   <span data-ttu-id="922c1-195">Upewnij się, że dane wyjściowe programu MSBuild wskazują, że kompilacja została ukończona pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="922c1-195">Make sure that the MSBuild output indicates that the build completed successfully.</span></span>
   
> [!Note]
> <span data-ttu-id="922c1-196">Program msbuild ma `-restore` przełącznik, który uruchamia `Restore` , ponownie ładuje projekt, a następnie tworzy kompilację.</span><span class="sxs-lookup"><span data-stu-id="922c1-196">msbuild has a `-restore` switch which will run `Restore`, reload the project, and then build.</span></span> <span data-ttu-id="922c1-197">Zobacz [Przywracanie i budowania za pomocą jednego polecenia MSBuild.](../reference/msbuild-targets.md#restoring-and-building-with-one-msbuild-command)</span><span class="sxs-lookup"><span data-stu-id="922c1-197">See [Restoring and building with one MSBuild command](../reference/msbuild-targets.md#restoring-and-building-with-one-msbuild-command).</span></span>

```cmd
# Will restore the project, then build, since build is the default target.
msbuild -restore
```

## <a name="restore-using-azure-pipelines"></a><span data-ttu-id="922c1-198">Przywracanie przy użyciu Azure Pipelines</span><span class="sxs-lookup"><span data-stu-id="922c1-198">Restore using Azure Pipelines</span></span>

<span data-ttu-id="922c1-199">Podczas tworzenia definicji kompilacji w programie Azure Pipelines zadania przywracania [NuGet](/azure/devops/pipelines/tasks/package/nuget#restore-nuget-packages) lub przywracania .NET [Core](/azure/devops/pipelines/tasks/build/dotnet-core-cli) w definicji przed dowolnymi zadaniami kompilacji.</span><span class="sxs-lookup"><span data-stu-id="922c1-199">When you create a build definition in Azure Pipelines, include the NuGet [restore](/azure/devops/pipelines/tasks/package/nuget#restore-nuget-packages) or .NET Core [restore](/azure/devops/pipelines/tasks/build/dotnet-core-cli) task in the definition before any build tasks.</span></span> <span data-ttu-id="922c1-200">Niektóre szablony kompilacji domyślnie zawierają zadanie przywracania.</span><span class="sxs-lookup"><span data-stu-id="922c1-200">Some build templates include the restore task by default.</span></span>

## <a name="restore-using-azure-devops-server"></a><span data-ttu-id="922c1-201">Przywracanie przy użyciu Azure DevOps Server</span><span class="sxs-lookup"><span data-stu-id="922c1-201">Restore using Azure DevOps Server</span></span>

<span data-ttu-id="922c1-202">Azure DevOps Server i TFS 2013 lub nowszy automatycznie przywracają pakiety podczas kompilacji, jeśli używasz szablonu TFS 2013 lub nowszej kompilacji zespołowej.</span><span class="sxs-lookup"><span data-stu-id="922c1-202">Azure DevOps Server and TFS 2013 and later automatically restore packages during build, if you're using a TFS 2013 or later Team Build template.</span></span> <span data-ttu-id="922c1-203">W przypadku wcześniejszych wersji serwera TFS można dołączyć krok kompilacji w celu uruchomienia opcji przywracania wiersza polecenia lub opcjonalnie przeprowadzić migrację szablonu kompilacji do nowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="922c1-203">For earlier TFS versions, you can include a build step to run a command-line restore option, or optionally migrate the build template to a later version.</span></span> <span data-ttu-id="922c1-204">Aby uzyskać więcej informacji, zobacz [Konfigurowanie przywracania pakietów za pomocą kompilacji Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="922c1-204">For more information, see [Set up package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="constrain-package-versions-with-restore"></a><span data-ttu-id="922c1-205">Ograniczanie wersji pakietów za pomocą przywracania</span><span class="sxs-lookup"><span data-stu-id="922c1-205">Constrain package versions with restore</span></span>

<span data-ttu-id="922c1-206">Gdy program NuGet przywraca pakiety za pomocą dowolnej metody, honoruje wszelkie ograniczenia określone w pliku `packages.config` projektu lub :</span><span class="sxs-lookup"><span data-stu-id="922c1-206">When NuGet restores packages through any method, it honors any constraints you specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="922c1-207">W `packages.config` pliku można określić zakres wersji we właściwości `allowedVersion` zależności.</span><span class="sxs-lookup"><span data-stu-id="922c1-207">In `packages.config`, you can specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="922c1-208">Aby [uzyskać więcej informacji,](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions) zobacz Ograniczanie wersji uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="922c1-208">See [Constrain upgrade versions](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions) for more information.</span></span> <span data-ttu-id="922c1-209">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="922c1-209">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="922c1-210">W pliku projektu można użyć funkcji PackageReference, aby bezpośrednio określić zakres zależności.</span><span class="sxs-lookup"><span data-stu-id="922c1-210">In a project file, you can use PackageReference to specify a dependency's range directly.</span></span> <span data-ttu-id="922c1-211">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="922c1-211">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="922c1-212">We wszystkich przypadkach należy użyć notacji opisanej w [te tematze Package versioning (Wersjonarowanie pakietów).](../concepts/package-versioning.md)</span><span class="sxs-lookup"><span data-stu-id="922c1-212">In all cases, use the notation described in [Package versioning](../concepts/package-versioning.md).</span></span>

## <a name="force-restore-from-package-sources"></a><span data-ttu-id="922c1-213">Wymuszanie przywracania ze źródeł pakietów</span><span class="sxs-lookup"><span data-stu-id="922c1-213">Force restore from package sources</span></span>

<span data-ttu-id="922c1-214">Domyślnie operacje przywracania NuGet używają pakietów z *folderów global-packages* i *http-cache,* które opisano w tece Zarządzanie globalnymi pakietami [i folderami pamięci podręcznej](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="922c1-214">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described in [Manage the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="922c1-215">Aby uniknąć używania *folderu global-packages,* wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="922c1-215">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="922c1-216">Wyczyść folder przy użyciu `nuget locals global-packages -clear` lub `dotnet nuget locals global-packages --clear` .</span><span class="sxs-lookup"><span data-stu-id="922c1-216">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`.</span></span>
- <span data-ttu-id="922c1-217">Tymczasowo zmień lokalizację folderu *global-packages* przed operacją przywracania, korzystając z jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="922c1-217">Temporarily change the location of the *global-packages* folder before the restore operation, using one of the following methods:</span></span>
  - <span data-ttu-id="922c1-218">Ustaw zmienną NUGET_PACKAGES środowiskowej na inny folder.</span><span class="sxs-lookup"><span data-stu-id="922c1-218">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="922c1-219">Utwórz `NuGet.Config` plik, który ustawia `globalPackagesFolder` (jeśli używasz PackageReference) lub (jeśli używasz `repositoryPath` ) do innego `packages.config` folderu.</span><span class="sxs-lookup"><span data-stu-id="922c1-219">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder.</span></span> <span data-ttu-id="922c1-220">Aby uzyskać więcej informacji, zobacz [ustawienia konfiguracji](../reference/nuget-config-file.md#config-section).</span><span class="sxs-lookup"><span data-stu-id="922c1-220">For more information, see [configuration settings](../reference/nuget-config-file.md#config-section).</span></span>
  - <span data-ttu-id="922c1-221">Tylko program MSBuild: określ inny folder za pomocą `RestorePackagesPath` właściwości .</span><span class="sxs-lookup"><span data-stu-id="922c1-221">MSBuild only: Specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="922c1-222">Aby uniknąć używania pamięci podręcznej dla źródeł HTTP, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="922c1-222">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="922c1-223">Użyj opcji z opcją lub z `-NoCache` `nuget restore` `--no-cache` opcją `dotnet restore` .</span><span class="sxs-lookup"><span data-stu-id="922c1-223">Use the `-NoCache` option with `nuget restore`, or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="922c1-224">Te opcje nie mają wpływu na operacje przywracania za pośrednictwem Visual Studio Menedżer pakietów lub konsoli.</span><span class="sxs-lookup"><span data-stu-id="922c1-224">These options don't affect restore operations through the Visual Studio Package Manager or console.</span></span>
- <span data-ttu-id="922c1-225">Wyczyść pamięć podręczną przy użyciu `nuget locals http-cache -clear` lub `dotnet nuget locals http-cache --clear` .</span><span class="sxs-lookup"><span data-stu-id="922c1-225">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="922c1-226">Tymczasowo ustaw zmienną NUGET_HTTP_CACHE_PATH na inny folder.</span><span class="sxs-lookup"><span data-stu-id="922c1-226">Temporarily set the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="migrate-to-automatic-package-restore-visual-studio"></a><span data-ttu-id="922c1-227">Migrowanie do automatycznego przywracania pakietów (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="922c1-227">Migrate to automatic package restore (Visual Studio)</span></span>

<span data-ttu-id="922c1-228">W przypadku programu NuGet 2.6 i starszych wersji przywracanie pakietów zintegrowanych z programem MSBuild było wcześniej obsługiwane, ale nie jest to już prawdziwe.</span><span class="sxs-lookup"><span data-stu-id="922c1-228">For NuGet 2.6 and earlier, an MSBuild-integrated package restore was previously supported but that is no longer true.</span></span> <span data-ttu-id="922c1-229">(Zazwyczaj było to włączane przez kliknięcie prawym przyciskiem myszy rozwiązania w Visual Studio i wybranie pozycji Włącz przywracanie **pakietów NuGet).**</span><span class="sxs-lookup"><span data-stu-id="922c1-229">(It was typically enabled by right-clicking a solution in Visual Studio and selecting **Enable NuGet Package Restore**).</span></span> <span data-ttu-id="922c1-230">Jeśli projekt używa przestarzałego przywracania pakietów zintegrowanych z programem MSBuild, przemigruj do automatycznego przywracania pakietów.</span><span class="sxs-lookup"><span data-stu-id="922c1-230">If your project uses the deprecated MSBuild-integrated package restore, please migrate to automatic package restore.</span></span>

<span data-ttu-id="922c1-231">Projekty, które używają MSBuild-Integrated przywracania pakietu, zwykle zawierają folder *.nuget* z *trzema* plikami:NuGet.config, *nuget.exe* i *NuGet.targets.*</span><span class="sxs-lookup"><span data-stu-id="922c1-231">Projects that use MSBuild-Integrated package restore typically contain a *.nuget* folder with three files: *NuGet.config*, *nuget.exe*, and *NuGet.targets*.</span></span> <span data-ttu-id="922c1-232">Obecność pliku *NuGet.targets* określa, czy program NuGet będzie nadal używać podejścia zintegrowanego z programem MSBuild, więc ten plik musi zostać usunięty podczas migracji.</span><span class="sxs-lookup"><span data-stu-id="922c1-232">The presence of a *NuGet.targets* file determines whether NuGet will continue to use the MSBuild-integrated approach, so this file must be removed during the migration.</span></span>

<span data-ttu-id="922c1-233">Aby przeprowadzić migrację do automatycznego przywracania pakietów:</span><span class="sxs-lookup"><span data-stu-id="922c1-233">To migrate to automatic package restore:</span></span>

1. <span data-ttu-id="922c1-234">Zamknij program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="922c1-234">Close Visual Studio.</span></span>
2. <span data-ttu-id="922c1-235">Usuń *pliki .nuget/nuget.exe* *i .nuget/NuGet.targets.*</span><span class="sxs-lookup"><span data-stu-id="922c1-235">Delete *.nuget/nuget.exe* and *.nuget/NuGet.targets*.</span></span>
3. <span data-ttu-id="922c1-236">Dla każdego pliku projektu usuń `<RestorePackages>` element i usuń wszelkie odwołania do pliku *NuGet.targets.*</span><span class="sxs-lookup"><span data-stu-id="922c1-236">For each project file, remove the `<RestorePackages>` element and remove any reference to *NuGet.targets*.</span></span>

<span data-ttu-id="922c1-237">Aby przetestować automatyczne przywracanie pakietów:</span><span class="sxs-lookup"><span data-stu-id="922c1-237">To test the automatic package restore:</span></span>

1. <span data-ttu-id="922c1-238">Usuń folder *packages* z rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="922c1-238">Remove the *packages* folder from the solution.</span></span>
2. <span data-ttu-id="922c1-239">Otwórz rozwiązanie w Visual Studio i rozpocznij kompilację.</span><span class="sxs-lookup"><span data-stu-id="922c1-239">Open the solution in Visual Studio and start a build.</span></span>

   <span data-ttu-id="922c1-240">Automatyczne przywracanie pakietów powinno pobierać i instalować każdy pakiet zależności bez dodawania ich do kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="922c1-240">Automatic package restore should download and install each dependency package, without adding them to source control.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="922c1-241">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="922c1-241">Troubleshooting</span></span>

<span data-ttu-id="922c1-242">Zobacz [Rozwiązywanie problemów z przywracaniem pakietu.](Package-restore-troubleshooting.md)</span><span class="sxs-lookup"><span data-stu-id="922c1-242">See [Troubleshoot package restore](Package-restore-troubleshooting.md).</span></span>
