---
title: Ostrzeżenie NuGet NU5128
description: Kod ostrzeżenia NU5128
author: zivkan
ms.date: 09/06/2019
ms.topic: reference
ms.reviewer: karann
f1_keywords:
- NU5128
ms.openlocfilehash: d1ce9fde28eff60b81f464088637572e6ad71a49
ms.sourcegitcommit: e4b0ff4460865db6dc7bc9f20e9f644d98493011
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/26/2019
ms.locfileid: "71307200"
---
# <a name="nuget-warning-nu5128"></a><span data-ttu-id="012e9-103">Ostrzeżenie NuGet NU5128</span><span class="sxs-lookup"><span data-stu-id="012e9-103">NuGet Warning NU5128</span></span>

## <a name="scenario-1"></a><span data-ttu-id="012e9-104">Scenariusz 1</span><span class="sxs-lookup"><span data-stu-id="012e9-104">Scenario 1</span></span>

<pre>Some target frameworks declared in the dependencies group of the nuspec and the lib/ref folder do not have exact matches in the other location. Consult the list of actions below:
- Add a dependency group for .NETStandard2.0 to the nuspec</pre>

### <a name="issue"></a><span data-ttu-id="012e9-105">Problem</span><span class="sxs-lookup"><span data-stu-id="012e9-105">Issue</span></span>

<span data-ttu-id="012e9-106">Katalog `lib/<tfm>/` lub`ref/<tfm>/` w pakiecie zawiera co najmniej jeden plik dla [monikera platformy docelowej (TFM)](../target-frameworks.md) określony w komunikacie ostrzegawczym.</span><span class="sxs-lookup"><span data-stu-id="012e9-106">The `lib/<tfm>/` or `ref/<tfm>/` directory in the package contains at least one file for the [Target Framework Moniker (TFM)](../target-frameworks.md) specified in the warning message.</span></span> <span data-ttu-id="012e9-107">Nie istnieje jednak żadna grupa zależności dla tego TFM w `nuspec` pliku.</span><span class="sxs-lookup"><span data-stu-id="012e9-107">However, no dependency group exists for this TFM in the `nuspec` file.</span></span> <span data-ttu-id="012e9-108">Może to spowodować, że odbiorcy pakietu uważają, że pakiet nie jest zgodny z TFM, nawet jeśli pakiet nie ma zależności.</span><span class="sxs-lookup"><span data-stu-id="012e9-108">This may cause package consumers to believe the package is not compatible with the TFM, even if the package does not have dependencies.</span></span> <span data-ttu-id="012e9-109">Jeśli pakiet zawiera niezadeklarowane zależności, projekt korzystający z pakietu będzie napotykał błędy środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="012e9-109">If the package has undeclared dependencies, the project using the package will experience runtime errors.</span></span>

### <a name="solution"></a><span data-ttu-id="012e9-110">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="012e9-110">Solution</span></span>

* <span data-ttu-id="012e9-111">Uruchom element docelowy pakietu NuGet w projekcie</span><span class="sxs-lookup"><span data-stu-id="012e9-111">Run NuGet's pack target on the project</span></span>

<span data-ttu-id="012e9-112">Jeśli to możliwe, użyj [obiektu docelowego programu MSBuild pakietu NuGet](../msbuild-targets.md), ponieważ automatycznie pasuje do TFMs zestawu z grupami zależności z platform docelowych projektu.</span><span class="sxs-lookup"><span data-stu-id="012e9-112">If possible, use [NuGet's MSBuild pack target](../msbuild-targets.md), as it automatically matches assembly TFMs with dependency groups from the project's target frameworks.</span></span> <span data-ttu-id="012e9-113">Należy zauważyć, że projekt musi `PackageReference` być używany do własnych zależności NuGet.</span><span class="sxs-lookup"><span data-stu-id="012e9-113">Note that your project must use `PackageReference` for its own NuGet dependencies.</span></span> <span data-ttu-id="012e9-114">Jeśli projekt używa pliku Packages. config, należy użyć `nuget.exe pack` programu `nuspec` i plików.</span><span class="sxs-lookup"><span data-stu-id="012e9-114">If your project uses packages.config, you need to use `nuget.exe pack` and a `nuspec` file.</span></span>

* <span data-ttu-id="012e9-115">Ręcznie edytowany `nuspec` plik</span><span class="sxs-lookup"><span data-stu-id="012e9-115">Manually edited `nuspec` file</span></span>

<span data-ttu-id="012e9-116">Jeśli używasz pliku niestandardowego `nuspec` , zalecamy każdy TFM, dla którego istnieją lub `ref/` które `lib/` zestawy powinny mieć pasującą grupę zależności, nawet jeśli zależności są takie same jak w przypadku następnych zgodnych TFM.</span><span class="sxs-lookup"><span data-stu-id="012e9-116">If you are using a custom `nuspec` file, we recommend each TFM for which `lib/` or `ref/` assemblies exist should have a matching dependency group, even if the dependencies are the same as the next compatible TFM.</span></span> <span data-ttu-id="012e9-117">Na przykład jeśli pakiet zawiera `netstandard1.0` i `netstandard2.0` zestawy, a zależności są takie same dla obu, zaleca się, aby oba TFMs były wyświetlane jako grupy zależności ze zduplikowanymi elementami zależności.</span><span class="sxs-lookup"><span data-stu-id="012e9-117">For example, if a package contains `netstandard1.0` and `netstandard2.0` assemblies, and the dependencies are the same for both, we recommend both TFMs be listed as dependency groups with duplicate dependency items.</span></span>

<span data-ttu-id="012e9-118">Należy zauważyć, że identyfikator TFM używany w ścieżkach zestawu używa innego formatu do identyfikatora TFM używanego w grupach zależności.</span><span class="sxs-lookup"><span data-stu-id="012e9-118">Note that the TFM identifier used in the assembly paths use a different format to the TFM identifier used in dependency groups.</span></span> <span data-ttu-id="012e9-119">Komunikat ostrzegawczy określa poprawną nazwę, która ma być używana w grupie zależności.</span><span class="sxs-lookup"><span data-stu-id="012e9-119">The warning message specifies the correct name to use in the dependency group.</span></span> <span data-ttu-id="012e9-120">Jeśli pakiet nie ma żadnych zależności dla tej platformy docelowej, użyj pustej grupy.</span><span class="sxs-lookup"><span data-stu-id="012e9-120">If your package does not have any dependencies for that target framework, use an empty group.</span></span> <span data-ttu-id="012e9-121">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="012e9-121">For example:</span></span>

```xml
<package>
  <metadata>
    ...
    <dependencies>
      <group targetFramework=".NETFramework4.7.2" />
    </dependencies>
  </metadata>
  ...
<package>
```

* <span data-ttu-id="012e9-122">`ref/` Usuń pliki `lib/` lub</span><span class="sxs-lookup"><span data-stu-id="012e9-122">Remove the `lib/` or `ref/` files</span></span>

<span data-ttu-id="012e9-123">Jeśli nie chcesz, aby pakiet był zgodny z zgłoszonym TFM, zmodyfikuj swój projekt, aby nie `lib/<tfm>/` było ani `ref/<tfm>/` plików w pakiecie dla tego TFM.</span><span class="sxs-lookup"><span data-stu-id="012e9-123">If you do not wish your package to be compatible with the reported TFM, modify your project such that no `lib/<tfm>/` or `ref/<tfm>/` files are in the package for that TFM.</span></span> <span data-ttu-id="012e9-124">Na przykład, jeśli ostrzeżenie ma `.NETFramework4.7.2` dodać grupę zależności dla `nuspec`do, a następnie usunąć wszystkie `lib/net472/*` pliki i `ref/net472/*` z pakietu.</span><span class="sxs-lookup"><span data-stu-id="012e9-124">For example, if the warning says to add a dependency group for `.NETFramework4.7.2` to the `nuspec`, then remove any `lib/net472/*` and `ref/net472/*` files from your package.</span></span>

## <a name="scenario-2"></a><span data-ttu-id="012e9-125">Scenariusz 2</span><span class="sxs-lookup"><span data-stu-id="012e9-125">Scenario 2</span></span>

<pre>Some target frameworks declared in the dependencies group of the nuspec and the lib/ref folder do not have exact matches in the other location. Consult the list of actions below:
- Add lib or ref assemblies for the netstandard2.0 target framework</pre>

### <a name="issue"></a><span data-ttu-id="012e9-126">Problem</span><span class="sxs-lookup"><span data-stu-id="012e9-126">Issue</span></span>

<span data-ttu-id="012e9-127">Plik ma grupę zależności dla zgłoszonej monikera platformy docelowej (TFM), ale nie istnieją żadne zestawy dla tego TFM `lib/` w ani `ref/`. `nuspec`</span><span class="sxs-lookup"><span data-stu-id="012e9-127">The `nuspec` file has a dependency group for the reported Target Framework Moniker (TFM), but no assemblies exist for this TFM in either `lib/` or `ref/`.</span></span> <span data-ttu-id="012e9-128">Jeśli istnieją zestawy dla zgodnego TFM, pakiet będzie nadal instalowany, ale zależności mogą być nieprawidłowe dla zestawów używanych w czasie kompilacji i mogą spowodować niepowodzenie projektu w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="012e9-128">If there are assemblies for a compatible TFM, the package will still install, but the dependencies might be incorrect for a assemblies used at compile time and could cause the project to fail at runtime.</span></span>

### <a name="solution"></a><span data-ttu-id="012e9-129">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="012e9-129">Solution</span></span>

* <span data-ttu-id="012e9-130">Uruchom element docelowy pakietu NuGet w projekcie</span><span class="sxs-lookup"><span data-stu-id="012e9-130">Run NuGet's pack target on the project</span></span>

<span data-ttu-id="012e9-131">Jeśli to możliwe, użyj [obiektu docelowego programu MSBuild pakietu NuGet](../msbuild-targets.md), ponieważ automatycznie pasuje do TFMs zestawu z grupami zależności z platform docelowych projektu.</span><span class="sxs-lookup"><span data-stu-id="012e9-131">If possible, use [NuGet's MSBuild pack target](../msbuild-targets.md), as it automatically matches assembly TFMs with dependency groups from the project's target frameworks.</span></span> <span data-ttu-id="012e9-132">Należy zauważyć, że projekt musi `PackageReference` być używany do własnych zależności NuGet.</span><span class="sxs-lookup"><span data-stu-id="012e9-132">Note that your project must use `PackageReference` for its own NuGet dependencies.</span></span> <span data-ttu-id="012e9-133">Jeśli projekt używa pliku Packages. config, należy użyć `nuget.exe pack` programu `nuspec` i plików.</span><span class="sxs-lookup"><span data-stu-id="012e9-133">If your project uses packages.config, you need to use `nuget.exe pack` and a `nuspec` file.</span></span>

* <span data-ttu-id="012e9-134">Ręcznie Edytuj `nuspec` plik</span><span class="sxs-lookup"><span data-stu-id="012e9-134">Manually edit the `nuspec` file</span></span>

<span data-ttu-id="012e9-135">Dodaj zgłoszoną TFM jako dodatkową platformę docelową, dla której kompiluje się projekt, i Dodaj zestawy do pakietu.</span><span class="sxs-lookup"><span data-stu-id="012e9-135">Add the reported TFM as an additional Target Framework for which your project compiles for, and add the assemblies to the package.</span></span> <span data-ttu-id="012e9-136">Jeśli używasz projektu w stylu zestawu SDK do wielu obiektów docelowych TFMs, obiekty docelowe pakietu MSBuild programu NuGet mogą automatycznie dodawać zestawy w prawidłowym `lib/<tfm>/` folderze i tworzyć grupy zależności z poprawnymi TFMs i zależnościami.</span><span class="sxs-lookup"><span data-stu-id="012e9-136">If you are using an SDK style project to multi-target multiple TFMs, NuGet's MSBuild pack targets can automatically add assemblies in the correct `lib/<tfm>/` folder and create dependency groups with the correct TFMs and dependencies.</span></span> <span data-ttu-id="012e9-137">Jeśli używasz projektu typu innego niż zestaw SDK, prawdopodobnie trzeba będzie utworzyć dodatkowy plik projektu dla dodatkowych TFM i zmodyfikować `nuspec` plik, aby skopiować zestawy wyjściowe we właściwym miejscu w pakiecie.</span><span class="sxs-lookup"><span data-stu-id="012e9-137">If you are using a non-SDK style project, you will likely need to create an additional project file for the additional TFM, and modify your `nuspec` file to copy the output assemblies in the correct location in the package.</span></span>

* <span data-ttu-id="012e9-138">Dodawanie pustego `_._` pliku</span><span class="sxs-lookup"><span data-stu-id="012e9-138">Add an empty `_._` file</span></span>

<span data-ttu-id="012e9-139">Jeśli pakiet nie zawiera żadnych zestawów, takich jak meta-Package, rozważ dodanie pustego `_._` pliku `lib/<tfm>/` do katalogów dla TFMs na liście w komunikacie ostrzegawczym.</span><span class="sxs-lookup"><span data-stu-id="012e9-139">If your package does not contain any assemblies, such as a meta-package, consider adding an empty `_._` file to the `lib/<tfm>/` directories for the TFMs listed in the warning message.</span></span> <span data-ttu-id="012e9-140">Jeśli na przykład ostrzeżenie ma dodać zestawy dla `netstandard2.0` platformy docelowej, Utwórz pusty `lib/netstandard2.0/_._` plik w pakiecie.</span><span class="sxs-lookup"><span data-stu-id="012e9-140">For example, if the warning says to add assemblies for the `netstandard2.0` target framework, create an empty `lib/netstandard2.0/_._` file in your package.</span></span>

* <span data-ttu-id="012e9-141">Usuń grupę zależności</span><span class="sxs-lookup"><span data-stu-id="012e9-141">Remove the dependency group</span></span>

<span data-ttu-id="012e9-142">Jeśli używasz pliku niestandardowego `nuspec` , Usuń grupę zależności dla zgłoszonego TFM, pozostawiając tylko grupy zależności dla TFMs, dla których `lib/<tfm>/` istnieją pliki lub `ref/<tfm>/` .</span><span class="sxs-lookup"><span data-stu-id="012e9-142">If you use a custom `nuspec` file, remove the dependency group for the reported TFM, leaving only dependency groups for TFMs for which `lib/<tfm>/` or `ref/<tfm>/` files exist.</span></span>

* <span data-ttu-id="012e9-143">Usuń wszystkie zależności dla pakietów, które nie są powiązane z zestawami</span><span class="sxs-lookup"><span data-stu-id="012e9-143">Remove all dependencies for packages that are not related to assemblies</span></span>

<span data-ttu-id="012e9-144">Jeśli pakiet nie zawiera żadnych `lib/` plików lub `ref/` nie jest to meta-Package, prawdopodobnie nie ma żadnych zależności, których potrzebuje odbiorca pakietu.</span><span class="sxs-lookup"><span data-stu-id="012e9-144">If your package does not contain any `lib/` or `ref/` files and is not a meta-package, it likely does not have any dependencies that the package consumer needs.</span></span> <span data-ttu-id="012e9-145">Jeśli pakowanie odbywa się za pomocą programu NuGet pakietu MSBuild, można ustawić `<SuppressDependenciesWhenPacking>true</SuppressDependenciesWhenPacking>` w dowolnym `PropertyGroup` miejscu w pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="012e9-145">If you are packing with NuGet's MSBuild Pack target, you can set `<SuppressDependenciesWhenPacking>true</SuppressDependenciesWhenPacking>` in any `PropertyGroup` in your project file.</span></span> <span data-ttu-id="012e9-146">Jeśli używasz pliku niestandardowego `nuspec` , `<dependencies>` Usuń element.</span><span class="sxs-lookup"><span data-stu-id="012e9-146">If you are using a custom `nuspec` file, remove the `<dependencies>` element.</span></span>

* <span data-ttu-id="012e9-147">Inne scenariusze</span><span class="sxs-lookup"><span data-stu-id="012e9-147">Other scenarios</span></span>

<span data-ttu-id="012e9-148">To ostrzeżenie zostało dodane podczas opracowywania rozwiązania NuGet 5.3 i pierwsze było dostępne w zestaw .NET Core SDK 3,0 wersja zapoznawcza 9.</span><span class="sxs-lookup"><span data-stu-id="012e9-148">This warning was added during NuGet 5.3's development, and first was available in .NET Core SDK 3.0 Preview 9.</span></span> <span data-ttu-id="012e9-149">Pakiet [NuGet/Home # 8583](https://github.com/nuget/home/issues/8583) śledzi problem polegający na tym, że ostrzeżenie zostało zgłoszone w zbyt dużej liczbie scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="012e9-149">[NuGet/Home#8583](https://github.com/nuget/home/issues/8583) tracks an issue where the warning was being raised in too many scenarios.</span></span> <span data-ttu-id="012e9-150">Można użyć właściwości programu `NoWarn` MSBuild (Dodaj `<NoWarn>$(NoWarn);NU5128</NoWarn>` do dowolnych `PropertyGroup` w pliku projektu).</span><span class="sxs-lookup"><span data-stu-id="012e9-150">You can use the `NoWarn` MSBuild property (add `<NoWarn>$(NoWarn);NU5128</NoWarn>` to any `PropertyGroup` in your project file).</span></span> <span data-ttu-id="012e9-151">W przypadku wielu projektów, których to dotyczy, można [`Directory.Build.targets`](/visualstudio/msbuild/customize-your-build) użyć programu do `NoWarn` automatycznego dodawania do wszystkich projektów.</span><span class="sxs-lookup"><span data-stu-id="012e9-151">If you have multiple projects affected, you can use [`Directory.Build.targets`](/visualstudio/msbuild/customize-your-build) to automatically add `NoWarn` to all projects.</span></span>
